{"version":3,"sources":["../node_modules/erste/src/lib/base/use.js","../node_modules/erste/src/lib/base/math.js","../node_modules/erste/src/lib/base/gesture-handler.js","../node_modules/erste/src/lib/base/uid.js","../node_modules/erste/src/lib/base/component-manager.js","../node_modules/erste/src/lib/base/eventemitter3.js","../node_modules/erste/src/lib/base/component.js","../node_modules/erste/src/lib/view.js","../node_modules/erste/src/lib/view-manager.js","../node_modules/erste/src/lib/locale.js","../node_modules/erste/src/components/sidebar/sidebar.js","../node_modules/erste/src/components/tab-view/tab-view.js","../node_modules/erste/src/components/navbar/navbar.js","../node_modules/erste/src/components/pull-to-refresh/pull-to-refresh-model.js","../node_modules/erste/src/components/pull-to-refresh/pull-to-refresh.js","../node_modules/erste/src/components/infinite-scroll/infinite-scroll-model.js","../node_modules/erste/src/lib/throttle.js","../node_modules/erste/src/components/infinite-scroll/infinite-scroll.js","../node_modules/erste/src/index.js","ui/Component.js","IConnectableModel.js","Connectable/ConnectableModel.js","IConnectable.js","io/Output.js","Connectable/Connectable.js","Connectable/index.js","footswitch/Switch/SwitchModel.js","footswitch/Momentary/MomentaryModel.js","footswitch/Switch/Switch.js","footswitch/Momentary/Momentary.js","footswitch/toggle/ToggleModel.js","footswitch/toggle/Toggle.js","footswitch/index.js","io/Input.js","io/FileInput.js","io/StreamInput.js","io/index.js","../lib/math.js","pot/pot/PotModel.js","pot/Linear/LinearModel.js","pot/pot/Pot.js","pot/Linear/Linear.js","pot/Log/LogModel.js","pot/Log/Log.js","pot/index.js","stomp/box/BoxModel.js","Led.js","stomp/box/Box.js","stomp/conv/ConvModel.js","stomp/cabinet/CabinetModel.js","stomp/conv/Conv.js","stomp/cabinet/Cabinet.js","stomp/delay/DelayModel.js","stomp/delay/Delay.js","stomp/overdrive/OverdriveModel.js","stomp/overdrive/Overdrive.js","stomp/reverb/ReverbModel.js","stomp/reverb/Reverb.js","stomp/volume/VolumeModel.js","stomp/volume/Volume.js","stomp/index.js","../lib/color.js","../lib/dom.js","../lib/style.js","ShadowMaker.js","Board.js","Stage.js","Bootstrapper.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["ErstePlugin","plugin","$$register","modulo","a","b","r","toDegrees","angleRadians","Math","PI","standardAngle","angle","x1","y1","x2","y2","atan2","distance","lerp","x","deviceIsIOSWithBadTarget","navigator","userAgent","match","test","EventType","TAP","LONG_TAP","SWIPE_RIGHT","SWIPE_UP","SWIPE_LEFT","SWIPE_DOWN","GestureHandler","constructor","opt_el","el","document","body","isInMotion","canTap","canSwipe","touchStartTime","touches","addEventListener","onTouchstart","bind","onTouchmove","onTouchend","e","Date","getTime","changedTouch","changedTouches","timeStamp","pageX","pageY","abs","push","date","filter","touch","index","arr","relatedTimeStamp","length","math","eventType","swipe","createEvent","initEvent","target","dispatchEvent","tapTimeDiff","tap","eventName","targetElement","elementFromPoint","window","pageXOffset","pageYOffset","counter","floor","random","getUid","toString","events","handlerMethodPattern","RegExp","join","decorateEvents","comp","prototype","__events","Object","getOwnPropertyNames","map","propertyName","exec","forEach","methodName","eventTarget","createElement","tempDiv","htmlString","innerHTML","trim","removeChild","firstChild","ComponentManager","componentRegistry","componentsToRender","gestureHandler","undefined","onLoad","handleEvent","targetEl","comps","getParentComps","broken","callHandlers","parentNode","type","MutationObserver","mutations","cmpId","rendered","render","observe","childList","subtree","child","node","parentComps","ids","split","id","i","handlers","selectors","keys","callHandler","rv","selector","matches","targetComponent","getComponent","call","setComponent","removeComponent","markComponentRendered","getInstance","instance","Component","EventEmitter","props","id_","element_","template_","rendered_","created","createdHooks","getElementById","tagExtension_","tagRegex","template","Error","replace","$$","querySelectorAll","$","querySelector","rootEl","opt_index","parentElement","onAfterRender","onAfterRenderHooks","setTimeout","requestAnimationFrame","onAfterRenderAsync","children","insertBefore","attachEvents","els","fn","dispose","removeAllListeners","detachEvents","removeEventListener","View","opt_rootEl","style","zIndex","String","transform","onActivation","panIn","isTheViewBeingPulled","transitionDuration","panOut","backGestureTouchMoveLastViewAnimation","lastViewDiff","currentViewIndex","backGestureTouchMoveCurrentViewAnimation","currentViewDiff","boxShadow","WIDTH","width_","bodyStyle","getComputedStyle","width","parseInt","supportsBackGesture","backGestureTouchTargetWidth","hasSidebar","ViewManager","opt_root","history","lastTouches_","state_","State","DEFAULT","rootEl_","currentView","hideSidebarTimeout_","firstX_","initialized_","root_","init_","rootView","initTouchEvents_","getLastViewInHistory","pull","view","opt_canGoBack","topIndex_","setCurrentView","slice","historicView","canGoBack","lastView","pop","opt_noDispose","translation","SIDEBAR_OPEN","toggleSidebar_","toggleSidebar","onTouchMove_","onTouchEnd_","clientX","clearTimeout","STARTED_GESTURE","GOING_TO_BACK_VIEW","shift","OPENING_SIDEBAR","CLOSING_SIDEBAR","backGestureTouchMove_","closeSidebarTouchMove_","openSidebarTouchMove_","state","backGestureTouchEnd_","duration","currentViewX","lastViewX","preventDefault","viewWidth","sidebar","sidebarX","sidebarZ","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","defaultLang_","dictionaries_","dictionary_","setDictionary","lang","dict","setLanguage","getLocalizedString","text","args","number","__","Sidebar","vm","onSidebarItemTap","getAttribute","emit","SWITCH_VIEW","template_items","mappings","ITEM","TabView","views","activeItemIndex","$views","VIEWS","activateItem","onItemTap","activeItem","ACTIVE_ITEM","items","ITEMS","itemIndex","indexOf","deactivateActiveItem","item","classList","add","activateItemByName","name","activeThings","ACTIVE","remove","template_views","ACTIVE_VIEW","NavBar","opt_config","hasBackButton","hasMenuButton","title","config","onBackButtonTap","onMenuButtonTap","backButton","menuButton","BACK_BUTTON","MENU_BUTTON","NavBarOptions","P2RComponentModel","reset","triggerShouldCheckState","REFRESHING","SHOULD_CHECK","shouldCheck","refresh","SHOULD_REFRESH","PullToRefresh","model","PullToRefreshModel","scrollEl","containerEl","scrollListener_","releaseListener_","register","bindModelEvents","on","onShouldRefresh","spinner","SPINNER","arrow","ARROW","height","transition","opacity","onScroll_","onRelease_","checkShouldRefresh","rot","scroll","scrollTop","pos","arrowOffset","pow","rotationThreshold","threshold","min","InfiniteScrollModel","LOADING","load","SHOULD_LOAD","threshhold","scope","last","deferTimer","now","apply","InfiniteScroll","endOfListText","throttle","checkShouldLoadMore_","onShouldLoad","opt_base","scrollHeight","offsetHeight","showSpinner","innerText","showEndOfList","erste","locale","use","content","getChildIds","that","getChild","opt_render","appendChild","splice","addChild","opt_unrender","ErsteComponent","IConnectableModel","destination","prev","ConnectableModel","context","next","chain","effects","inputBuffer","createGain","outputBuffer","concat","routeInternal","len","connect","disconnect","IConnectable","Output","source","Connectable","modelClass","setModel","createChildComponents","components","getInput","getOutput","setPrev","SwitchModel","opt_name","nodes","oldState","turnOn","turnOff","ON","OFF","work","toggle","MomentaryModel","Switch","BUTTON","setNodes","templates_name","Momentary","ToggleModel","Toggle","Input","createBufferSource","loop","NOT_STARTED","onEnded","opt_time","start","PLAYING","stop","FINISHED","sourceBuffer","buffer","FileInput","url","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","setSourceBuffer","send","StreamInput","getUserMedia","stream","createMediaStreamSource","err","Coordinate","opt_x","opt_y","y","peek","array","clamp","value","max","PotModel","param","multiplier","opt_min","opt_max","opt_default","Function","minValue","maxValue","defaultValue","setValue","newValue","oldValue","processValue","VALUE_CHANGED","LinearModel","Pot","opt_size","KNOB","KNOB_HOLDER","size","Size","REGULAR","newStyle","getNormalizedValue","updateUi","SMALL","Linear","LogModel","Log","BoxModel","level","newLevel","gain","Led","opt_footswitch","footswitch","onSwitchValueChange","Box","volumePot","bypassSwitch","led","leds","switches","pots","POTS","SWITCHES","LEDS","createPots","createSwitches","className","toLowerCase","pot","sw","ConvModel","conv","createConvolver","convGain","iRPath","loadIR","CabinetModel","Conv","gainMultiplier","Cabinet","DelayModel","delayer","createDelay","delayTime","feedbackGain","newTimer","newGain","Delay","delayTimerPot","feedbackGainPot","delayTimeHandler","setDelayTimer","feedbackGainHandler","setFeedbackGain","OverdriveModel","lowPassFreq","lowPass","createBiquadFilter","frequency","waveShaper","createWaveShaper","wsCurve","amount","k","n_samples","Float32Array","deg","curve","newDrive","createWSCurve","newTone","Overdrive","drivePot","tonePot","driveHandler","setDrive","toneHandler","setTone","ReverbModel","Reverb","VolumeModel","Volume","names","hexTripletRe","validHexColorRe","rgbColorRe","isValidRgbColor","str","regExpResultArray","Number","g","isValidHexColor","normalizeHex","hexColor","prependHashIfNecessaryHelper","charAt","parse","result","maybeHex","hex","rgb","rgbArrayToHex","rgbToHex","substr","hexToRgb","hexToHsl","rgbToHsl","normR","normG","normB","h","s","l","round","blend","rgb1","rgb2","factor","darken","black","defaultDomHelper","NodeType","ELEMENT","ATTRIBUTE","TEXT","CDATA_SECTION","ENTITY_REFERENCE","ENTITY","PROCESSING_INSTRUCTION","COMMENT","DOCUMENT","DOCUMENT_TYPE","DOCUMENT_FRAGMENT","NOTATION","getOwnerDocument","nodeType","ownerDocument","getDocument","DomHelper","opt_document","document_","removeNode","getDomHelper","opt_element","insertSiblingBefore","newNode","refNode","getDocumentScrollElement","doc","scrollingElement","documentElement","getWindow","parentWindow","defaultView","getDocumentScroll","win","scrollLeft","getBoundingClientRect","getClientViewportElement","opt_node","dom","getPageOffset","viewportElement","box","scrollCoord","left","top","shadowMaker","element","darkness","weight","opt_before","opt_after","elStyle","colorText","getPropertyValue","hslArray","color","shadowTemplate","blur","opt_d","d","shadows","xAngle","innerWidth","offsetWidth","yAngle","innerHeight","yConDist","con","xDist","yDist","reverse","textShadowMaker","before","after","invertY","invertX","textShadow","textShadowMakerDom","position","rgbArray","cloneNode","webkitTransform","Board","output","mediaStreamDestination","pedals","EMPTY","addChildren","getPedals","pedal","doShadows","addChildAt","templates_empty","getChildren","fx","Stage","input","board","AudioContext","initIO","setMediaStreamDestination","route","play","Bootstrapper","webkitGetUserMedia","mozGetUserMedia","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","dep","Array","isArray","deps","cached","cache","some","cb"],"mappings":"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C7C,IAAnC;AACpB,QAAI,CAACA,IAAI,CAACE,QAAV,EAAoBH,cAAc,CAACC,IAAD,CAAd;AACvB;AAED;AACJ;AACA;AACA;AACA;;;AACI0D,EAAAA,eAAe,CAAC1D,IAAD,EAAO;AAClB,WAAO,KAAKmB,iBAAL,CAAuBnB,IAAI,CAAC6C,EAA5B,CAAP;AACA,WAAO,KAAKzB,kBAAL,CAAwBpB,IAAI,CAAC6C,EAA7B,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACIc,EAAAA,qBAAqB,CAAC3D,IAAD,EAAO;AACxB,WAAO,KAAKoB,kBAAL,CAAwBpB,IAAI,CAAC6C,EAA7B,CAAP;AACH;;AAED,SAAOe,WAAP,GAAqB;AACjB,QAAI,CAAC1C,gBAAgB,CAAC2C,QAAtB,EACI3C,gBAAgB,CAAC2C,QAAjB,GAA4B,IAAI3C,gBAAJ,EAA5B;AAEJ,WAAOA,gBAAgB,CAAC2C,QAAxB;AACH;;AAzJiC;;;;AC1EtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACxXA;;AACA;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAMC,SAAN,SAAwBC,qBAAxB,CAAqC;AAChD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIxH,EAAAA,WAAW,CAACyH,KAAK,GAAG,EAAT,EAAa;AACpB;AAEA;AACR;AACA;AACA;AACA;AACA;;AACQ,SAAKC,GAAL,GAAW/C,0BAAiB0C,WAAjB,GAA+BnE,MAA/B,EAAX;AAEA;AACR;AACA;AACA;AACA;;AACQ,SAAKyE,QAAL,GAAgB,IAAhB;AAEA;AACR;AACA;AACA;AACA;AACA;AACA;;AACQ,SAAKC,SAAL,GAAiB,IAAjB;AAEA;AACR;AACA;AACA;AACA;AACA;AACA;;AACQ,SAAKC,SAAL,GAAiB,KAAjB;AAEA;AACR;AACA;AACA;AACA;AACA;AACA;;AACQ,SAAKJ,KAAL,GAAaA,KAAb;;AAEA9C,8BAAiB0C,WAAjB,GAA+BH,YAA/B,CAA4C,IAA5C;;AAEA,SAAKY,OAAL,CAAa,KAAKL,KAAlB;AACA,SAAKM,YAAL,CAAkB,KAAKN,KAAvB;AACH;AAGD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIK,EAAAA,OAAO,CAACL,KAAD,EAAQ,CAAE;AAEjB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIM,EAAAA,YAAY,CAACN,KAAD,EAAQ,CAAE;AAEtB;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI,MAAInB,EAAJ,GAAS;AACL,WAAO,KAAKoB,GAAZ;AACH;AAGD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI,MAAIxH,EAAJ,GAAS;AACL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","file":"Bootstrapper.js","sourceRoot":"..\\src","sourcesContent":["/**\n * @typedef {{$$register: Function}}\n */\nconst ErstePlugin = null\n\n/**\n * @param {ErstePlugin} plugin An erste plugin to install and use. Its `$$register`\n * method will be called with erste as the first parameter, allowing it to\n * modify the erste module freely. One common use case is the regie npm \n * library, which is the state management solution for vanilla JavaScript \n * applications and erste. It injects the store into root of erste and allows\n * Components to have a special syntax to declare observations for state\n * properties.\n */\nexport default function(plugin) {\n    plugin.$$register(this)\n}\n","/**!\n * Adapted from Google Closure Library, math.js\n *\n *\n * Copyright 2006 The Closure Library Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * The % operator in JavaScript returns the remainder of a / b, but differs from\n * some other languages in that the result will have the same sign as the\n * dividend. For example, -1 % 8 == -1, whereas in some other languages\n * (such as Python) the result would be 7. This function emulates the more\n * correct modulo behavior, which is useful for certain applications such as\n * calculating an offset index in a circular list.\n *\n * @param {number} a The dividend.\n * @param {number} b The divisor.\n * @return {number} a % b where the result is between 0 and b (either 0 <= x < b\n *     or b < x <= 0, depending on the sign of b).\n */\nconst modulo = (a, b) => {\n    var r = a % b;\n    // If r and b differ in sign, add b to wrap the result to the correct sign.\n    return (r * b < 0) ? r + b : r;\n};\n\n/**\n * Converts radians to degrees.\n * @param {number} angleRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nconst toDegrees = angleRadians => {\n    return angleRadians * 180 / Math.PI;\n};\n\n/**\n * Normalizes an angle to be in range [0-360). Angles outside this range will\n * be normalized to be the equivalent angle with that range.\n * @param {number} angle Angle in degrees.\n * @return {number} Standardized angle.\n */\nconst standardAngle = angle => modulo(angle, 360);\n\n/**\n * Computes the angle between two points (x1,y1) and (x2,y2).\n * Angle zero points in the +X direction, 90 degrees points in the +Y\n * direction (down) and from there we grow clockwise towards 360 degrees.\n * @param {number} x1 x of first point.\n * @param {number} y1 y of first point.\n * @param {number} x2 x of second point.\n * @param {number} y2 y of second point.\n * @return {number} Standardized angle in degrees of the vector from\n *     x1,y1 to x2,y2.\n */\nconst angle = (x1, y1, x2, y2) => {\n    return standardAngle(toDegrees(Math.atan2(y2 - y1, x2 - x1)));\n};\n\n/**\n * Calculates distance between two points given 4 points.\n * @param {number} x1 X value of the first point\n * @param {number} y1 Y value of the first point\n * @param {number} x2 X value of the second point\n * @param {number} y2 Y value of the second point\n * @return {number} Distance between two points\n */\nconst distance = (x1, y1, x2, y2) => (x1 - x2) ** 2 + (y1 - y2) ** 2;\n\n\n/**\n * Performs linear interpolation between values a and b. Returns the value\n * between a and b proportional to x (when x is between 0 and 1. When x is\n * outside this range, the return value is a linear extrapolation).\n * @param {number} a A number.\n * @param {number} b A number.\n * @param {number} x The proportion between a and b.\n * @return {number} The interpolated value between a and b.\n */\nconst lerp = (a, b, x) => {\n    return a + x * (b - a);\n};\n\nexport default {\n    angle: angle,\n    distance: distance,\n    lerp: lerp\n}\n","/**\n * @fileoverview GestureHandler adds the ability to capture gesture events on\n * touch enabled devices.\n * It listens to 'touchstart', 'touchmove' and 'touchend' events and generates\n * 'tap' or 'swipe' events with inherent heuristics.\n *\n * Currently, the tap algorithm begins with a touchstart, checks for touchend.\n * Any touchmove greater than 3px cancels the tap event, and if a touchend is\n * captured without a touchmove after a touchstart; it's registered as a tap,\n * and the GestureHandler dispatches a tap event on the touchend target.\n *\n * Swipe up, left, right and down gestures are also supported.\n *\n * Example usage:\n *\n *     document.body.addEventListener('tap', function() {\n *         console.log('tapped!');\n *     });\n */\n\nimport math from './math';\n\n/**\n * iOS 6.0(+?) requires the target element to be manually derived.\n * @type {?boolean}\n */\nconst deviceIsIOSWithBadTarget = navigator.userAgent.match(/iPhone/i) &&\n    (/OS ([6-9]|\\d{2})_\\d/).test(navigator.userAgent);\n\nconst EventType = {\n    TAP: 'tap',\n    LONG_TAP: 'longTap',\n    SWIPE_RIGHT: 'swipeRight',\n    SWIPE_UP: 'swipeUp',\n    SWIPE_LEFT: 'swipeLeft',\n    SWIPE_DOWN: 'swipeDown'\n};\n\nexport default class GestureHandler {\n    /**\n     * Tracks and fires gestures on touch enabled devices.\n     *\n     * @param {!HTMLElement=} opt_el Provided, gesture handler will track gesture\n     *                           events on this element. The default\n     *                           value is document.body; but an optional\n     *                           root element is inevitable for iframe's.\n     */\n    constructor(opt_el) {\n        this.el = opt_el || document.body;\n\n        this.isInMotion = false;\n        this.canTap = false;\n        this.canSwipe = false;\n\n        /**\n         * @type {number} Start time of the first touch in milliseconds since 1970\n         */\n        this.touchStartTime = 0;\n\n        /**\n         * @type {!Array.<number>} Touch list whose first element is the time of the first touch\n         */\n        this.touches = [];\n\n        this.el.addEventListener('touchstart', this.onTouchstart.bind(this), false);\n        this.el.addEventListener('touchmove', this.onTouchmove.bind(this), false);\n        this.el.addEventListener('touchend', this.onTouchend.bind(this), false);\n    }\n\n    onTouchstart(e) {\n        this.isInMotion = true;\n        this.canTap = true;\n        this.canSwipe = true;\n        this.touchStartTime = new Date().getTime();\n\n        var changedTouch = e.changedTouches[0];\n\n        this.touches = [e.timeStamp, changedTouch.pageX, changedTouch.pageY];\n    }\n\n    onTouchmove(e) {\n        var touches = this.touches,\n            changedTouch = e.changedTouches[0];\n\n        if (Math.abs(changedTouch.pageX - touches[1]) > 20 ||\n            Math.abs(changedTouch.pageY - touches[2]) > 20)\n            this.canTap = false;\n\n        if (!this.canSwipe) return;\n\n        touches.push(e.timeStamp, changedTouch.pageX, changedTouch.pageY);\n        if (+new Date() > touches[0] + 100) {\n            this.canSwipe = false;\n            return;\n        }\n\n        // Filter the touches\n        var date = e.timeStamp;\n        touches = touches.filter((touch, index, arr) => {\n            var relatedTimeStamp = arr[index - (index % 3)];\n            return relatedTimeStamp > date - 250;\n        });\n\n        if ((touches.length / 3) <= 1) return;\n\n        var distance = math.distance(touches[1], touches[2], touches[touches.length - 2], touches[touches.length - 1]);\n        if (distance < 60) return;\n\n        // calculate angle.\n        var angle = math.angle(touches[1], touches[2], touches[touches.length - 2], touches[touches.length - 1]);\n\n        var eventType = EventType.SWIPE_RIGHT;\n        if (angle > 45 && angle < 135) {\n            eventType = EventType.SWIPE_DOWN;\n        }\n        else if (angle > 135 && angle < 225) {\n            eventType = EventType.SWIPE_LEFT;\n        }\n        else if (angle > 225 && angle < 315) {\n            eventType = EventType.SWIPE_UP;\n        }\n\n        var swipe = document.createEvent(\"Event\");\n        swipe && swipe.initEvent(eventType, true, true);\n        e.target.dispatchEvent(swipe);\n\n        this.canSwipe = false;\n\n    }\n\n    onTouchend(e) {\n        this.isInMotion = false;\n\n        if (!this.canTap) return;\n\n        var touches = this.touches,\n            changedTouch = e.changedTouches[0];\n\n        if (Math.abs(changedTouch.pageX - touches[1]) > 20 ||\n            Math.abs(changedTouch.pageY - touches[2]) > 20) {\n            this.canTap = false;\n            return;\n        }\n\n        var tapTimeDiff = new Date().getTime() - this.touchStartTime;\n        var tap = document.createEvent('Event');\n        var eventName = tapTimeDiff > 800 ? EventType.LONG_TAP : EventType.TAP;\n        tap && tap.initEvent(eventName, true, true);\n\n        // Target element fix for iOS6+\n        var targetElement = e.target;\n\n        if (deviceIsIOSWithBadTarget)\n            targetElement = document.elementFromPoint(changedTouch.pageX - window.pageXOffset,\n                changedTouch.pageY - window.pageYOffset);\n\n        targetElement.dispatchEvent(tap);\n    }\n}\n","let counter = Math.floor(Math.random() * 2147483648);\n\n/**\n * Returns a unique identifier string, which is an auto-incremented\n * base-36 counter.\n *\n * @return {string}\n */\nconst getUid = () => (counter++).toString(36);\n\nexport default getUid;\n","import GestureHandler from './gesture-handler';\nimport getUid from './uid';\nimport Component from './component';\n\nconst events = [\n    'blur',\n    'click',\n    'mouseover',\n    'mouseout',\n    'mousemove',\n    'mousedown',\n    'mouseup',\n    'scroll',\n    'keyup',\n    'keypress',\n    'focus',\n    'paste',\n    'input',\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'tap',\n    'longtap',\n    'doubletap',\n    'press',\n    'pan',\n    'swipe',\n    'swipeTop',\n    'swipeRight',\n    'swipeBottom',\n    'swipeLeft'\n];\n\n// match & select \"[eventType] [css selector]\"\nconst handlerMethodPattern = new RegExp(`^(${events.join('|')}) (.*)`);\n\n/**\n * Fills events object of given component class from method names that match event handler pattern.\n *\n * @param {!Component} comp Component instance to decorate events for.\n */\nfunction decorateEvents(comp) {\n    const prototype = /** @type {!Function} */(comp.constructor).prototype;\n\n    if (prototype.__events) return;\n\n    let events = {};\n\n    if ('events' in prototype) {\n        events = prototype.events;\n    }\n\n    Object.getOwnPropertyNames(prototype)\n        .map(propertyName => handlerMethodPattern.exec(propertyName))\n        .filter(x => x)\n        .forEach(([methodName, eventType, eventTarget]) => {\n            events[eventType] = events[eventType] || {};\n\n            /** @suppress {checkTypes} */\n            events[eventType][eventTarget] = comp[methodName];\n        })\n\n    prototype.__events = events;\n}\n\nconst createElement = (() => {\n    const tempDiv = document.createElement('div');\n\n    return htmlString => {\n        tempDiv.innerHTML = htmlString.trim();\n        return tempDiv.removeChild(tempDiv.firstChild);\n    };\n})();\n\nexport default class ComponentManager {\n    constructor() {\n        this.componentRegistry = {};\n        this.componentsToRender = {};\n        this.gestureHandler = undefined;\n\n        if (document.body) this.onLoad();\n        else document.addEventListener('DOMContentLoaded', () => this.onLoad());\n\n        this.getUid = getUid\n        this.createElement = createElement\n    \n    }\n\n    handleEvent(e) {\n        e.targetEl = e.target;\n\n        let comps = this.getParentComps(e.target),\n            broken = false;\n\n        do {\n            if (broken) break;\n\n            e['targetEl'] = e.targetEl;\n\n            broken = this.callHandlers(comps, e);\n        } while ((e.targetEl = e.targetEl.parentNode) && (e.targetEl != document.body));\n    }\n\n    onLoad() {\n        events.forEach(type => document.body.addEventListener(type, this.handleEvent.bind(this)));\n\n        this.gestureHandler = new GestureHandler();\n\n        new MutationObserver(mutations => {\n            for (let cmpId in this.componentsToRender) {\n                const rendered = this.componentsToRender[cmpId].render();\n\n                if (rendered) delete this.componentsToRender[cmpId];\n            }\n        }).observe(document.body, { childList: true, subtree: true });\n    }\n\n    getParentComps(child) {\n        let node = child, parentComps = [], comp, ids;\n\n        if (ids = node.parentComps) {\n            ids.split(',').forEach(id => parentComps.push(this.componentRegistry[id]));\n\n            return parentComps;\n        }\n\n        ids = [];\n\n        do {\n            if (comp = this.componentRegistry[node.id]) {\n                parentComps.push(comp);\n                ids.push(node.id);\n            }\n        } while (node = node.parentNode);\n\n        child.parentComps = ids.join(',');\n        return parentComps;\n    }\n\n    /**\n   * Given a list of componentsRegistry, checks whether any component would\n   * respond to the given event and if so, executes the event handler\n   * defined in the component.\n   */\n    callHandlers(comps, e) {\n        let broken = false;\n\n        for (let i = 0; i < comps.length; i++) {\n            let comp = comps[i];\n            const events = comp && comp.__events;\n            let handlers = events[e.type];\n\n            if (!handlers) continue;\n\n            let selectors = Object.keys(handlers);\n\n            if (this.callHandler(comp, e, handlers, selectors) === false) {\n                broken = true;\n                break;\n            }\n        }\n\n        return broken;\n    }\n\n    callHandler(comp, e, handlers, selectors) {\n        let rv = true;\n\n        selectors.forEach(selector => {\n            if (e.targetEl.matches && e.targetEl.matches(selector)) {\n                let targetComponent = this.getComponent(e.targetEl.id);\n\n                rv = handlers[selector].call(comp, e, targetComponent);\n            }\n        });\n\n        return rv;\n    }\n\n    /**\n  * Given an id, returns a component in the registry.\n  *\n  * @param {string} id Id for the component instance.\n  */\n    getComponent(id) {\n        return this.componentRegistry[id];\n    }\n\n    /**\n   * Registers a component to the component registry, setting it up for render if it hasn't already\n   * been rendered.\n   *\n   * Also, if this is the first time this type of component is registered, it checks and decomposes\n   * the event handler declaration syntax sugar.\n   *\n   * @param {!Component} comp Component instance to register.\n   */\n    setComponent(comp) {\n        this.componentRegistry[comp.id] = comp;\n        if (!comp.rendered) this.componentsToRender[comp.id] = comp;\n        if (!comp.__events) decorateEvents(comp)\n    }\n\n    /**\n  * Given an id, removes a component from the registry.\n  *\n  * @param {!Component} comp Component instance to remove.\n  */\n    removeComponent(comp) {\n        delete this.componentRegistry[comp.id];\n        delete this.componentsToRender[comp.id];\n    }\n\n    /**\n  * Given an id, marks a component as rendered, removing it from the render queue.\n  *\n  * @param {!Component} comp Component instance to mark as rendered.\n  */\n    markComponentRendered(comp) {\n        delete this.componentsToRender[comp.id];\n    }\n\n    static getInstance() {\n        if (!ComponentManager.instance) \n            ComponentManager.instance = new ComponentManager()\n\n        return ComponentManager.instance\n    }\n\n}\n\n","// @ts-nocheck\n/*!\n * EventEmitter3\n *\n * https://www.github.com/primus/eventemitter3\n *\n * Copyright (c) 2014 Arnout Kazemier\n */\n\n/**\n * Forked/adapted from https://www.github.com/primus/eventemitter3\n * \n * The MIT License (MIT)\n * \n * Copyright (c) 2014 Arnout Kazemier\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n    , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() { }\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n    Events.prototype = Object.create(null);\n\n    //\n    // This hack is needed because the `__proto__` property is still inherited in\n    // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n    //\n    if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n    this.fn = fn;\n    this.context = context;\n    this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(string|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n    if (typeof fn !== 'function') {\n        throw new TypeError('The listener must be a function');\n    }\n\n    var listener = new EE(fn, context || emitter, once)\n        , evt = prefix ? prefix + event : event;\n\n    if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n    else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n    else emitter._events[evt] = [emitter._events[evt], listener];\n\n    return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(string|Symbol|number)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n    if (--emitter._eventsCount === 0) emitter._events = new Events();\n    else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n    this._events = new Events();\n    this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n    var names = []\n        , events\n        , name;\n\n    if (this._eventsCount === 0) return names;\n\n    for (name in (events = this._events)) {\n        if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n        return names.concat(Object.getOwnPropertySymbols(events));\n    }\n\n    return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(string|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n    var evt = prefix ? prefix + event : event\n        , handlers = this._events[evt];\n\n    if (!handlers) return [];\n    if (handlers.fn) return [handlers.fn];\n\n    for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n        ee[i] = handlers[i].fn;\n    }\n\n    return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(string|Symbol)} event The event name.\n * @returns {number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n    var evt = prefix ? prefix + event : event\n        , listeners = this._events[evt];\n\n    if (!listeners) return 0;\n    if (listeners.fn) return 1;\n    return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(string|Symbol)} event The event name.\n * @param {*=} a1\n * @param {*=} a2\n * @param {*=} a3\n * @param {*=} a4\n * @param {*=} a5\n * @returns {boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n    var evt = prefix ? prefix + event : event;\n\n    if (!this._events[evt]) return false;\n\n    var listeners = this._events[evt]\n        , len = arguments.length\n        , args\n        , i;\n\n    if (listeners.fn) {\n        if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n        switch (len) {\n        case 1: return listeners.fn.call(listeners.context), true;\n        case 2: return listeners.fn.call(listeners.context, a1), true;\n        case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n        case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n        case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n        case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n\n        for (i = 1, args = new Array(len - 1); i < len; i++) {\n            args[i - 1] = arguments[i];\n        }\n\n        listeners.fn.apply(listeners.context, args);\n    } else {\n        var length = listeners.length\n            , j;\n\n        for (i = 0; i < length; i++) {\n            if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n            switch (len) {\n            case 1: listeners[i].fn.call(listeners[i].context); break;\n            case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n            case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n            case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n            default:\n                if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) {\n                    args[j - 1] = arguments[j];\n                }\n\n                listeners[i].fn.apply(listeners[i].context, args);\n            }\n        }\n    }\n\n    return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(string|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n    return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(string|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n    return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(string|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n    var evt = prefix ? prefix + event : event;\n\n    if (!this._events[evt]) return this;\n    if (!fn) {\n        clearEvent(this, evt);\n        return this;\n    }\n\n    var listeners = this._events[evt];\n\n    if (listeners.fn) {\n        if (\n            listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n        ) {\n            clearEvent(this, evt);\n        }\n    } else {\n        for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n            if (\n                listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n            ) {\n                events.push(listeners[i]);\n            }\n        }\n\n        //\n        // Reset the array, or remove it completely if we have no more listeners.\n        //\n        if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n        else clearEvent(this, evt);\n    }\n\n    return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(string|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n    var evt;\n\n    if (event) {\n        evt = prefix ? prefix + event : event;\n        if (this._events[evt]) clearEvent(this, evt);\n    } else {\n        this._events = new Events();\n        this._eventsCount = 0;\n    }\n\n    return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n    module.exports = EventEmitter;\n}\n","import ComponentManager from './component-manager';\nimport EventEmitter from './eventemitter3';\n\n\n/**\n * {@link Component} is a role that determines an aspect of your user interface.\n * It defines what your users see on the page. Every {@link Component} includes\n * a set of behaviors, like what happens when a user clicks on a button.\n *\n * {@link Component}s should be dummy, in that they should have no memory,\n * or state, of their own. {@link Component}s know how to draw a user interface\n * and how to handle user input; whose business logic should be delegated to\n * other classes in the system.\n *\n * @extends {EventEmitter}\n */\nexport default class Component extends EventEmitter {\n    /**\n     * Creates a new {@link View} instance. Users should subclass this class\n     * to incorporate their own functionality, as the default View instance\n     * doesn't provide anything out of the box.\n     *\n     * @example\n     *\n     * import {Component} from 'erste';\n     *\n     * class ButtonWithLabel extends Component {\n     *     template() {\n     *         return `\n     *         <button-with-label>\n     *             <h1>Hello world!</h1>\n     *             <button>Tap me!</button>\n     *         </button-with-label>\n     *         `;\n     *     }\n     *\n     *     onTapButton() {\n     *         this.$('h1').innerText = 'Thanks for the tap!';\n     *     }\n     *\n     *     get events() {\n     *         return {\n     *             'tap': {\n     *                 'button': this.onTapButton\n     *             }\n     *         }\n     *     }\n     * }\n     *\n     * @param {Object!} props Properties that will be saved as `this.props`.\n     */\n    constructor(props = {}) {\n        super();\n\n        /**\n         * @type {string}\n         *\n         * @private\n         * @const\n         */\n        this.id_ = ComponentManager.getInstance().getUid();\n\n        /**\n         * @type {?HTMLElement}\n         *\n         * @private\n         */\n        this.element_ = null;\n\n        /**\n         * The HTML template of a {@link Component}.\n         *\n         * @type {?string}\n         *\n         * @private\n         */\n        this.template_ = null;\n\n        /**\n         * Whether the {@link Component} has been rendered into the DOM.\n         *\n         * @type {boolean}\n         *\n         * @private\n         */\n        this.rendered_ = false;\n\n        /**\n         * @export\n         *\n         * An object that holds the properties passed to the constructor at instantiation.\n         *\n         * @type {!Object}\n         */\n        this.props = props;\n\n        ComponentManager.getInstance().setComponent(this);\n\n        this.created(this.props);\n        this.createdHooks(this.props);\n    }\n\n\n    /**\n     * @export\n     *\n     * This method is called after a {@link Component} is created, but before it's\n     * rendered into the DOM.\n     *\n     * Subclasses should override this method for tasks that should be done\n     * when the {@link Component} is created. It's a convenient method that can be\n     * used instead of overriding the constructor.\n     *\n     * @param {!Object} props The properties passed onto this {@link Component}\n     * at instantiation.\n     */\n    created(props) {}\n\n    /**\n     * @export\n     *\n     * This method is called after a {@link Component} is created, but before it's\n     * rendered into the DOM.\n     *\n     * Plugins should override this method for tasks that should be done\n     * when the {@link Component} is created. It's a convenient method that can be\n     * used instead of overriding the constructor.\n     *\n     * @param {!Object} props The properties passed onto this {@link Component}\n     * at instantiation.\n     */\n    createdHooks(props) {}\n\n    /**\n     * @export\n     *\n     * The auto-generated, unique id of the {@link Component}.\n     *\n     * @return {string}\n     */\n    get id() {\n        return this.id_;\n    }\n\n\n    /**\n     * @export\n     *\n     * The DOM element of the {@link Component}. This is a getter that first\n     * checks whether the component has been rendered as a DOM element, and\n     * returns the `HTMLElement` if so. If the component hasn't been rendered\n     * yet, it looks for the element in the DOM. If it's still not yet in the\n     * DOM, it renders the element to a DOM element and returns it accordingly.\n     *\n     * @return {!HTMLElement}\n     */\n    get el() {\n        let rv = this.element_;\n        if (!rv) {\n            rv = this.element_ = /** @type {!HTMLElement} */ (document.getElementById(this.id) ||\n                 (ComponentManager.getInstance().createElement(this.toString())));\n        }\n\n        return rv;\n    }\n\n\n    /**\n     * Provides template for populating the `id` field of a component.\n     *\n     * Should not be overridden.\n     *\n     * @protected\n     */\n    tagExtension_() {\n        return `$1 id=\"${this.id}\"`;\n    }\n\n\n    /**\n     * @export\n     *\n     * This method makes sure that users can conveniently include\n     * {@link Component}s in the template of an owner component. Whenever a\n     * {@link Component} is cast to a string, we calculate the template and\n     * return it.\n     *\n     * Notice that this is only a template, and does not correspond to the\n     * actual {@link Component} instance. In other words, one can't move a\n     * {@link Component} instance from a parent to a new parent simply by using\n     * its template in the new parent.\n     *\n     * @override\n     */\n    toString() {\n        if (this.template_) return this.template_;\n\n        var tagRegex = /^(<[^>]+)/;\n        var template = this.template(this.props).trim();\n\n        if (!template.match(tagRegex))\n            throw Error('Template needs to start with a valid tag.');\n\n        template = template\n            .replace(/\\s+/, ' ')\n            .replace(tagRegex, this.tagExtension_());\n\n        this.template_ = template;\n\n        return this.template_;\n    }\n\n    /**\n     * @export\n     *\n     * Given a query selector, returns an array of child `Element`s of this\n     * {@link Component} or an empty array if no results are found. This is a\n     * wrapper around `el.querySelectorAll`, and conveniently returns an array\n     * instead of a `NodeList`, so all array operations work.\n     *\n     * @param {string} selector Selector to retrieve child `Element`s\n     * @return {!Array.<!Element>} The list of child `Element`s or an empty list\n     */\n    $$(selector) {\n        let rv = [], el = this.el;\n\n        if (el) rv = [...el.querySelectorAll(selector)];\n\n        return rv;\n    }\n\n    /**\n     * @export\n     *\n     * Given a query selector, returns the first child `Element` of this\n     * {@link Component} or null if no results are found or the\n     * {@link Component} hasn't been rendered yet. This is a wrapper around\n     * `el.querySelector`.\n     *\n     * @param {string} selector Selector\n     * @return {?HTMLElement}\n     */\n    $(selector) {\n        let rv = null, el = this.element_;\n\n        if (el) rv = selector == undefined ? el : /** @type {HTMLElement} */(el.querySelector(selector));\n\n        return rv;\n    }\n\n\n    /**\n     * @export\n     *\n     * Renders the {@link Component} into a given parent DOM element and returns\n     * the result. May be called with an optional index to indicate where the\n     * DOM element of this {@link Component} should be inserted in the parent.\n     *\n     * @param {!HTMLElement} rootEl Root element to render this component in.\n     * @param {number=} opt_index The index of this component within the parent\n     * component. This may be used to render a new child before an existing\n     * child in the parent.\n     *\n     * @return {boolean} Whether the component is rendered. Note that it might\n     * have already been rendered, not as a direct result of this call to\n     * {@link #Component+render|component.render()}.\n     */\n    render(rootEl, opt_index) {\n        if (this.rendered_) return true;\n\n        if (!this.element_) {\n\n            var el = /** @type {HTMLElement} */ (document.getElementById(this.id));\n            if (!el && !rootEl) return false;\n\n            if (el) {\n                rootEl = /** @type {!HTMLElement} */(el.parentElement);\n                if (!opt_index) {\n                    this.element_ = el;\n                    this.rendered_ = true;\n                    this.onAfterRender();\n                    this.onAfterRenderHooks();\n\n                    setTimeout(() => requestAnimationFrame(() => this.onAfterRenderAsync()));\n\n                    return true;\n                }\n            }\n\n            var index = opt_index ? opt_index : ((rootEl && rootEl.children.length - 1) || -1);\n            var child = rootEl && rootEl.children[index];\n            rootEl && rootEl.insertBefore(this.el, child || null);\n            this.rendered_ = true;\n        }\n\n        this.onAfterRender();\n        this.onAfterRenderHooks();\n\n        setTimeout(() => requestAnimationFrame(() => this.onAfterRenderAsync()));\n\n        return true;\n    }\n\n    /**\n     * @export\n     */\n    get rendered() {\n        if (!this.rendered_) {\n            var el = document.getElementById(this.id);\n            if (el) {\n                this.element_ = /** @type {HTMLElement} */(el);\n                this.rendered_ = true;\n                this.onAfterRender();\n                this.onAfterRenderHooks();\n            }\n        }\n\n        return this.rendered_;\n    }\n\n\n    /**\n     * @export\n     *\n     * This method is called after a render process either as a direct result\n     * of a {@link #Component+render|component.render()} call or after the\n     * template of this component is inserted into the DOM.\n     *\n     * Subclasses should override this method for tasks that should be done\n     * when the {@link Component} is in the document.\n     */\n    onAfterRender() {}\n\n    /**\n     * @export\n     *\n     * This method is called after a render process either as a direct result\n     * of a {@link #Component+render|component.render()} call or after the\n     * template of this component is inserted into the DOM. The main difference\n     * with {@link #Component+onAfterRender|component.onAfterRender()} is that\n     * this method is for operations that need to be implemented\n     * asynchronously  such as CSS transitions. Effectively, this saves you\n     * from calling requestAnimationFrame or setTimeout yourself.\n     *\n     * Subclasses should override this method for tasks that should be done\n     * asynchronously after the {@link Component} is rendered in the document.\n     */\n    onAfterRenderAsync() {}\n\n    /**\n     * @export\n     *\n     * This method is called after a {@link Component} is rendered.\n     *\n     * Plugins should override this method for tasks that should be done\n     * when the {@link Component} is rendered. It's a convenient method that\n     * can be used instead of overriding `onAfterRender`.\n     */\n    onAfterRenderHooks() {\n        const attachEvents = (eventName) => {\n            if (!this.__events[eventName]) return\n\n            Object.keys(this.__events[eventName]).forEach(selector => {\n                const els = this.$$(selector)\n                const fn = this.__events[eventName][selector].bind(this)\n\n                els.forEach(el => {\n                    el['__ersteEventHandlers'] = el['__ersteEventHandlers'] || {}\n                    el['__ersteEventHandlers'][eventName] = fn\n                    el.addEventListener(eventName, fn)\n                })\n            })\n        }\n\n        attachEvents('focus')\n        attachEvents('blur')\n    }\n\n    /**\n     * @export\n     *\n     * Default template for {@link Component}s. Returns an empty `<div>` by\n     * default and should be overridden to provide actual HTML templates.\n     *\n     * A template can also contain another {@link Component} directly, as in the\n     * example below. This is a very handy way of rendering component\n     * hierarchies.\n     *\n     * @example\n     *\n     * template() {\n     *     this.buttonWithLabel = new ButtonWithLabel();\n     *\n     *     return `\n     *     <div>\n     *         <h1>Label</h1>\n     *         ${this.buttonWithLabel}\n     *     </div>\n     *     `;\n     * }\n     *\n     * @param {!Object} props The properties passed onto this {@link Component}\n     * at instantiation.\n     * @return {string}\n     */\n    template(props) {\n        return `<div></div>`;\n    }\n\n    /**\n     * @export\n     *\n     * This method should be called when this {@link Component} is being\n     * removed.\n     *\n     * Make sure to override this method in your {@link Component}s if\n     * they have side effects that should be cleared, e.g. removing event\n     * listeners, and make sure to call `super()`.\n     *\n     * The base implementation here removes all event listeners attached to this\n     * {@link Component} and also removes the {@link Component} from the\n     * {@link ComponentManager}. Finally, it removes the DOM element from the\n     * document.\n     */\n    dispose() {\n        ComponentManager.getInstance().removeComponent(this);\n        this.removeAllListeners();\n\n        const detachEvents = eventName => {\n            if (!this.__events[eventName]) return\n\n            Object.keys(this.__events[eventName]).forEach(selector => {\n                const els = this.$$(selector)\n\n                els.forEach(el => {\n                    const fn = el['__ersteEventHandlers'][eventName]\n                    el.removeEventListener(eventName, fn)\n                })\n            })\n        }\n\n        detachEvents('focus')\n        detachEvents('blur')\n\n\n        this.element_ && this.element_.parentNode && this.element_.parentNode.removeChild(this.element_);\n        this.element_ = null;\n    }\n}\n\n/**\n * @export\n *\n * @type {Object|undefined}\n */\nComponent.prototype.events = undefined\n\n/**\n * @type {Object|undefined}\n */\nComponent.prototype.__events = undefined\n","import Component from './base/component';\n\n\n/**\n * The default view class for all the views in an erste application. A\n * {@link View} is simply a {@link Component} with additional\n * convenience features. For example, a {@link View} renders to `document.body`\n * by default, whereas a {@link Component} silently ignores the call if no root\n * is provided. Also, regardless of the template, a `view` attribute is added\n * to the root DOM elements of each {@link View}, so that uniform styling\n * across all views is possible without much heavy-lifting.\n *\n * For implementing full-screen, navigable views, users should subclass\n * {@link View}.\n *\n * erste requires you to manually instantiate\n * all the views in your application.\n *\n * @extends {Component}\n */\nexport default class View extends Component {\n    /**\n     * Creates a new {@link View} instance. Users should subclass this class\n     * to incorporate their own functionality, as the default View instance\n     * doesn't provide anything out of the box.\n     *\n     * @example\n     *\n     * class RootView extends erste.View {\n     *     template() {\n     *         return `\n     *         <root-view>\n     *             <h1>Hello world!</h1>\n     *             <button>Click me!</button>\n     *         </root-view>\n     *         `;\n     *     }\n     *\n     *     onTapButton() {\n     *         this.$('h1').innerText = 'Thanks for the tap!';\n     *     }\n     *\n     *     get events() {\n     *         return {\n     *             'tap': {\n     *                 'button': this.onTapButton\n     *             }\n     *         }\n     *     }\n     * }\n     *\n     * new RootView().render(); // renders into body.\n     *\n     * @param {!Object} props Properties that will be saved as `this.props`.\n     */\n    constructor(props = {}) {\n        super(props);\n    }\n\n    /**\n     * Renders the view into a parent DOM element. The default root element\n     * is `document.body`, so for the sake of simplicity, one can just call\n     * `view.render()` to render the view into the DOM.\n     *\n     * @override\n     *\n     * @param {?HTMLElement=} opt_rootEl=document.body Root element\n     * to render this view in.\n     * @param {number=} opt_index The index of this view in z-axis.\n     */\n    render(opt_rootEl = document.body, opt_index = 0) {\n        this.index = opt_index;\n\n        return super.render(/** @type {!HTMLElement} */(opt_rootEl));\n    }\n\n\n    /**\n     * This method is similar to `viewDidAppear` or `componentDidMount` methods\n     * found in other frameworks. It's called automatically when the view is\n     * rendered into the DOM. This method already sets the`z-index` property\n     * and accompanying CSS transforms appropriately, positioning the view to\n     * its correct place.\n     *\n     * Override to provide custom functionality after the view's root element\n     * enters the DOM. This can be listening to additional DOM events or\n     * manipulating element properties.\n     *\n     * Make sure to call `super.onAfterRender()` when you override this method.\n     *\n     * @override\n     */\n    onAfterRender() {\n        super.onAfterRender();\n\n        this.el.style.zIndex = String(this.index);\n        this.el.style.transform = `translate3d(0, 0, ${this.index}px)`;\n    }\n\n\n    /**\n     * @export\n     *\n     * This method is called after the view is activated by a ViewManager, i.e.,\n     * either `pull`ed or set as the current view using\n     * {@link ViewManager#setCurrentView|setCurrentView}.\n     *\n     * Subclasses should override this method for tasks that should be done\n     * when the View is in viewport, such as updating information, etc.\n     */\n    onActivation() { }\n\n    /**\n     * @export\n     * \n     * This method is called to animate in a view.\n     *\n     * Subclasses should override this method to take controll over the way\n     * the `currentView` ot the `lastView` is animated in when `pull`ed or `push`ed.\n     * \n     * @param {boolean} isTheViewBeingPulled Whether the view is being `pull`ed or `push`ed\n     */\n    panIn(isTheViewBeingPulled) { \n        if (isTheViewBeingPulled) {\n            this.el.style.transitionDuration = '0s';\n            this.el.style.transform = `translate3d(100%, 0, ${this.index}px)`;\n            requestAnimationFrame(() => {\n                this.el.style.transitionDuration = '0.35s';\n                requestAnimationFrame(() => {\n                    this.el.style.transform = `translate3d(0, 0, ${this.index}px)`;\n                    this.el.style['boxShadow'] = '0 0 24px black';\n                });\n            });\n        } else {\n            window.requestAnimationFrame(() => {\n                this.el.style.transitionDuration = '0s';\n                this.el.style.transform = 'translate3d(-30%,0,0)';\n                window.requestAnimationFrame(() => {\n                    this.el.style.transitionDuration = '0.35s';\n\n                    this.el.style.transform = `translate3d(0, 0, ${this.index}px)`;\n                });\n            });\n        }\n    }\n    \n    /**\n     * @export\n     * \n     * This method is called to animate out a view.\n     *\n     * Subclasses should override this method to take controll over the way\n     * the `currentView` ot the `lastView` is animated out when `pull`ed or `push`ed.\n     * \n     * @param {boolean} isTheViewBeingPulled Whether the view is being `pull`ed or `push`ed.\n     */\n    panOut(isTheViewBeingPulled) { \n        const fn = () => {\n            this.el.style.transitionDuration = '0s';\n            this.el.style.transform = 'translate3d(-100%,-100%,0)';\n            this.el.removeEventListener('transitionend', fn);\n        };\n\n        this.el.addEventListener('transitionend', fn);\n\n        if(isTheViewBeingPulled){\n            requestAnimationFrame(() => {\n                this.el.style.transitionDuration = '0.35s';\n                requestAnimationFrame(() => {\n                    this.el.style.transform = `translate3d(-30%, 0, ${this.index}px)`;\n                });\n            });\n        } else {\n            window.requestAnimationFrame(() => {\n                this.el.style.transitionDuration = '0s';\n                window.requestAnimationFrame(() => {\n                    this.el.style.transitionDuration = '0.35s';\n                    this.el.style.transform = `translate3d(100%, 0, ${this.index}px)`;\n                    this.el.style['boxShadow'] = '0 0 0 black';\n                });\n            });\n        }\n    }\n\n    backGestureTouchMoveLastViewAnimation({lastViewDiff,currentViewIndex}){\n        window.requestAnimationFrame(() => {\n            this.el.style.transitionDuration = '0s';\n            this.el.style.transform = `translate3d(${lastViewDiff}px, 0, ${currentViewIndex - 1}px)`;\n        });\n    }\n\n    backGestureTouchMoveCurrentViewAnimation({currentViewDiff, boxShadow}){\n        window.requestAnimationFrame(() => {\n            this.el.style.transitionDuration = '0s';\n            this.el.style.transform = `translate3d(${currentViewDiff}px, 0, ${this.index}px)`;\n\n            this.el.style['boxShadow'] = `0px 0 24px rgba(0, 0, 0, ${boxShadow})`;\n        });\n    }\n\n\n    /**\n     * Default template for views. Uses a custom element `<view>`, which should\n     * be set to `display: block` for proper looks.\n     *\n     * @example\n     * You can use the following CSS rule in your implementation:\n     *\n     * ```css\n     * [view] {\n     *     position: absolute;\n     *     transition: transform .35s;\n     *     z-index: 0;\n     *     top: 0px;\n     *     bottom: 0px;\n     *     width: 100%;\n     *     overflow: hidden;\n     *     -webkit-overflow-scrolling: touch;\n     * }\n     * ```\n     * @override\n     */\n    template() {\n        return `\n<view></view>\n`;\n    }\n\n\n    /**\n     * Provides template for populating the `id` field and adding the `view`\n     * attribute.\n     *\n     * Should not be overridden.\n     *\n     * @override\n     *\n     * @protected\n     */\n    tagExtension_() {\n        return `$1 id=\"${this.id}\" view`;\n    }\n\n\n    /**\n     * @export\n     *\n     * Returns the width of the viewport in pixels.\n     *\n     * @return {number} The device width.\n     */\n    static get WIDTH() {\n        if (!View.width_) {\n            var bodyStyle = window.getComputedStyle(document.body, null);\n\n            var width = parseInt(bodyStyle && bodyStyle.width || '0', 10);\n\n            View.width_ = width;\n            return View.width_;\n        }\n        else {\n            return View.width_;\n        }\n    }\n}\n\n/**\n * @static @type {?number} */\nView.width_ = null\n\n/**\n * @export\n *\n * View index in z-axis. This is used as the Z-value for initial translate3d\n * CSS declaration.\n *\n * @type {number}\n */\nView.prototype.index = 0;\n\n\n/**\n * @export\n *\n * Determines whether the view should support back gestures to\n * go back in history of a {@link ViewManager}.\n *\n * @type {boolean}\n */\nView.prototype.supportsBackGesture = false;\n\n/**\n * @export\n *\n * Determines the touch area width of the back gesture\n *\n * @type {number}\n */\nView.prototype.backGestureTouchTargetWidth = 50;\n\n/**\n * @export\n *\n * Determines whether the view allows swipe / drag gestures to reveal an\n * associated sidebar. This lets the view manager orchestrate the touch gestures\n * for revealing the sidebar menu.\n *\n * @type {boolean}\n */\nView.prototype.hasSidebar = false;\n","import View from './view';\nimport ComponentManager from '../lib/base/component-manager';\nimport math from '../lib/base/math';\n\n\n/**\n * This class handles view transitions and view history in a consistent\n * manner similar to `NavigationController`s in other frameworks.\n * An instance of this class should be used by views that will contain other\n * views, and will allow navigation in between them.\n *\n * Also, each multi-view application should have at least one root\n * {@link ViewManager}.\n */\nclass ViewManager {\n    /**\n     * {@link ViewManager} constructor. At least one {@link ViewManager} should\n     * be present in all multi-view erste applications.\n     *\n     * @param {(!Element|!View)=} opt_root Root element for this\n     * {@link ViewManager}.\n     *\n     * Default is `document.body`. Can also be a {@link View}, in which case the\n     * root element will be the {@link View#el} of the aforementioned View. In\n     * this case, the View instance should be rendered before any\n     * view interactions are done via {@link #ViewManager+pull|viewManager.pull}\n     * or other {@link ViewManager} methods.\n     */\n    constructor(opt_root) {\n        /**\n         * @export\n         *\n         * Array of views stored in memory. When\n         * {@link #ViewManager+pull|viewManager.pull} is called with the second\n         * argument set to `true`, meaning the user should be able to go back,\n         * the current view is pushed to this array.\n         *\n         * When it's time to reset the history, all views in history are\n         * disposed.\n         *\n         * @type {!Array.<!View>}\n         */\n        this.history = [];\n\n        /**\n         * @private\n         *\n         * @type {!Array.<number>}\n         */\n        this.lastTouches_ = [];\n\n        /**\n         * Initial state of the `viewManager`. Indicates the sidebar is off and\n         * there are no active gestures on the root element.\n         *\n         * @private\n         *\n         * @type {ViewManager.State}\n         */\n        this.state_ = ViewManager.State.DEFAULT;\n\n        /**\n         * @private\n         *\n         * @type {?HTMLElement}\n         */\n        this.rootEl_ = null;\n\n        /**\n         * @export\n         *\n         * Current active view.\n         *\n         * @type {?View}\n         */\n        this.currentView = null;\n\n        /**\n         * @private\n         */\n        this.hideSidebarTimeout_ = null;\n\n        /**\n         * @private\n         *\n         * @type {number}\n         */\n        this.firstX_ = 0;\n\n        /**\n         * @private\n         *\n         * @type {boolean}\n         */\n        this.initialized_ = false;\n\n        /**\n         * @private\n         *\n         * @type {(!Element|!View|undefined)}\n         */\n        this.root_ = undefined;\n\n        if (opt_root) {\n            this.root_ = opt_root;\n        }\n    }\n\n\n    /**\n     * @private\n     */\n    init_() {\n        this.initialized_ = true;\n\n        if (this.root_ instanceof View) {\n            var rootView = /** @type {!View} */(this.root_);\n\n            if (!rootView.rendered)\n                throw new Error(`View Manager's root is not rendered yet`);\n            else\n                this.rootEl_ = rootView.el;\n        }\n        else\n            this.rootEl_ = /** @type {?HTMLElement} */(this.root_) || document.body;\n\n        this.initTouchEvents_();\n    }\n\n\n    /**\n     * @export\n     *\n     * Returns the last view in this {@link ViewManager}'s\n     * {@link #ViewManager+history|history}, and null if the\n     * {@link #ViewManager+history|history} is empty.\n     *\n     * This may be used to send messages to whatever the previous {@link View}\n     * is in the history right before a\n     * {@link #ViewManager+pull|viewManager.push()} call.\n     *\n     * @return {?View}\n     */\n    getLastViewInHistory() {\n        return this.history[this.history.length - 1] || null;\n    }\n\n\n    /**\n     * @export\n     *\n     * @param {!View} view {@link View} instance to pull into the scene.\n     * @param {boolean=} opt_canGoBack Whether the {@link ViewManager} should\n     * keep history so that one can go back to the previous {@link View}.\n     *\n     * Has a hard-coded transition effect similar to iOS7+.\n     */\n    pull(view, opt_canGoBack) {\n        if (!this.initialized_) this.init_();\n\n        if (!view.rendered && this.rootEl_) view.render(this.rootEl_, this.topIndex_ += 2);\n\n        var currentView = this.currentView;\n\n        if (!currentView) return this.setCurrentView(view);\n\n        if (opt_canGoBack) {\n            this.history.push(currentView);\n        }\n        else {\n            var history = this.history.slice(0);\n            this.history = [];\n\n            setTimeout(() => {\n                currentView.dispose();\n\n                // Dispose all views in history.\n                history.forEach(historicView => historicView.dispose());\n            }, 1000);\n        }\n        \n        view.panIn(true)\n        currentView.panOut(true)\n\n        this.currentView = view;\n        this.currentView.onActivation && this.currentView.onActivation();\n\n        this.state_ = ViewManager.State.DEFAULT;\n    }\n\n\n    /**\n     * @export\n     *\n     * Returns true if there is one or more views in history,\n     * returns false otherwise.\n     *\n     * @return {boolean} Whether the view manager can push current view.\n     */\n    canGoBack() {\n        return this.history && this.history.length > 0;\n    }\n\n\n    /**\n     * @export\n     *\n     * Switches to the previous view if there's one, and ignores the call if\n     * the {@link #ViewManager+history|history} is empty.\n     *\n     * Has a hard-coded transition effect similar to iOS7+.\n     */\n    push() {\n        var lastView = this.history.pop(),\n            currentView = this.currentView;\n\n        if (!lastView) return;\n\n        if (!this.initialized_) this.init_();\n\n        lastView.panIn(false)\n        currentView.panOut(false)\n\n        this.currentView = lastView;\n        lastView.onActivation && lastView.onActivation();\n\n        setTimeout(() => currentView.dispose(), 1000);\n\n        this.state_ = ViewManager.State.DEFAULT;\n    }\n\n\n    /**\n     * @export\n     *\n     * Makes a given view the foremost view without animations and with\n     * disposing previous views in history.\n     *\n     * @param {!View} view The view to set as the foremost view.\n     * @param {boolean=} opt_noDispose Whether to dispose the current view.\n     */\n    setCurrentView(view, opt_noDispose) {\n        if (!this.initialized_) this.init_();\n\n        if (!view.rendered && this.rootEl_) view.render(this.rootEl_, this.topIndex_ += 2);\n\n        var currentView = this.currentView;\n\n        if (!opt_noDispose) {\n            setTimeout(() => currentView && currentView.dispose(), 1000);\n        } else if (currentView) {\n            currentView.el.style.transitionDuration = '0s';\n            currentView.el.style.transform = `translate3d(100%, 0, ${currentView.index}px)`;\n        }\n\n        view.index = this.topIndex_ += 2;\n        this.currentView = view;\n        this.currentView.onActivation && this.currentView.onActivation();\n\n        // Dispose all views in history.\n        this.history.forEach(historicView => historicView.dispose());\n\n        this.history = [];\n\n        var translation = `translate3d(0, 0, ${view.index}px)`;\n        view.el.style.transitionDuration = '0s';\n\n        if (this.state_ == ViewManager.State.SIDEBAR_OPEN) {\n            translation = `translate3d(${128 - View.WIDTH}px, 0, ${view.index}px)`;\n\n            view.el.style.transform = translation;\n            this.toggleSidebar_(false);\n\n            return;\n        }\n\n        view.el.style.zIndex = String(view.index);\n        view.el.style.transform = translation;\n\n        this.state_ = ViewManager.State.DEFAULT;\n    }\n\n\n    /**\n     * @export\n     *\n     * Toggles the sidebar on or off according to its current state.\n     * This is to be used for a menu button, for example.\n     */\n    toggleSidebar() {\n        if (!this.initialized_) this.init_();\n\n        this.toggleSidebar_(this.state_ == ViewManager.State.DEFAULT);\n    }\n\n\n    /**\n     * Initializes touch event handlers for all touch end and touch move\n     * events ocurring on the root element.\n     *\n     * @private\n     */\n    initTouchEvents_() {\n        if (!this.rootEl_) return;\n\n        this.rootEl_.addEventListener('touchmove', this.onTouchMove_.bind(this), false);\n        this.rootEl_.addEventListener('touchend', this.onTouchEnd_.bind(this), false);\n    }\n\n\n    /**\n     * Handles touch move events and decides how the view transitions should\n     * occur.\n     *\n     * @private\n     */\n    onTouchMove_(e) {\n        var clientX = e.changedTouches && e.changedTouches[0].clientX || 0;\n        clearTimeout(this.hideSidebarTimeout_);\n\n        if (this.state_ == ViewManager.State.DEFAULT || this.state_ == ViewManager.State.SIDEBAR_OPEN)\n            this.firstX_ = clientX;\n\n        if (this.state_ == ViewManager.State.DEFAULT) {\n            this.lastTouches_ = [];\n\n            this.state_ = ViewManager.State.STARTED_GESTURE;\n        }\n\n        if (this.state_ == ViewManager.State.STARTED_GESTURE) {\n            if (clientX <= this.currentView.backGestureTouchTargetWidth) {\n                if (this.history.length && this.currentView && this.currentView.supportsBackGesture)\n                    this.state_ = ViewManager.State.GOING_TO_BACK_VIEW;\n            }\n            else if (this.currentView && this.currentView.hasSidebar) {\n                this.lastTouches_.push(this.firstX_ - clientX);\n\n                if (this.lastTouches_.length == 4) this.lastTouches_.shift();\n\n                if (this.lastTouches_[2] - this.lastTouches_[0] > 40)\n                    this.state_ = ViewManager.State.OPENING_SIDEBAR;\n            }\n        }\n\n        if (this.state_ == ViewManager.State.SIDEBAR_OPEN)\n            this.state_ = ViewManager.State.CLOSING_SIDEBAR;\n\n        switch (this.state_) {\n        case ViewManager.State.GOING_TO_BACK_VIEW:\n            this.backGestureTouchMove_(e);\n            break;\n        case ViewManager.State.CLOSING_SIDEBAR:\n            this.closeSidebarTouchMove_(e);\n            break;\n        case ViewManager.State.OPENING_SIDEBAR:\n            this.openSidebarTouchMove_(e);\n            break;\n        }\n    }\n\n\n    /**\n     * Handles touch end events and decides how the view transitions should\n     * follow.\n     *\n     * @private\n     */\n    onTouchEnd_(e) {\n        var state;\n\n        switch (this.state_) {\n        case ViewManager.State.GOING_TO_BACK_VIEW:\n            this.backGestureTouchEnd_(e);\n            break;\n        case ViewManager.State.OPENING_SIDEBAR:\n            state = true;\n            if (this.lastTouches_[2] - this.lastTouches_[0] < 3)\n                state = false;\n\n            this.toggleSidebar_(state);\n            break;\n        case ViewManager.State.CLOSING_SIDEBAR:\n            state = true;\n            if (this.lastTouches_[2] - this.lastTouches_[0] < -3)\n                state = false;\n\n            this.toggleSidebar_(state);\n            break;\n        case ViewManager.State.SIDEBAR_OPEN:\n            if (ComponentManager.getInstance().gestureHandler.canTap) return;\n            this.toggleSidebar_(false);\n            break;\n        default:\n            this.state_ = ViewManager.State.DEFAULT;\n        }\n    }\n\n\n    /**\n     * Handles touch end event when they occur in a back gesture.\n     *\n     * @private\n     * @param {!TouchEvent} e Touch end event.\n     */\n    backGestureTouchEnd_(e) {\n        if (!this.firstX_) return;\n\n        var history = this.history,\n            lastView = this.getLastViewInHistory(),\n            currentView = this.currentView,\n            clientX = e.changedTouches && e.changedTouches[0].clientX || 0,\n            duration = math.lerp(0.15, 0.35, (View.WIDTH - clientX) / View.WIDTH);\n\n        window.requestAnimationFrame(() => {\n            currentView.el.style.transitionDuration = duration + 's';\n            lastView.el.style.transitionDuration = duration + 's';\n\n            var currentViewX = '100%',\n                lastViewX = '0';\n\n            if (clientX < (View.WIDTH / 2)) {\n                currentViewX = '0';\n                lastViewX = '-30%';\n\n                const fn = () => {\n                    lastView.el.style.transitionDuration = '0s';\n                    lastView.el.style.transform = 'translate3d(-100%,-100%,0)';\n                    lastView.el.removeEventListener('transitionend', fn);\n                }\n\n                lastView.el.addEventListener('transitionend', fn);\n            } else {\n                this.currentView = /** View */this.getLastViewInHistory();\n                history.pop();\n\n                lastView.onActivation && lastView.onActivation();\n\n                setTimeout(() => {\n                    currentView.dispose();\n                }, 1000);\n            }\n\n            currentView.el.style.transform = `translate3d(${currentViewX}, 0, ${currentView.index}px)`;\n            lastView.el.style.transform = `translate3d(${lastViewX}, 0, ${currentView.index - 1}px)`;\n            currentView.el.style['boxShadow'] = '0px 0 0px black';\n        });\n\n        this.state_ = ViewManager.State.DEFAULT;\n    }\n\n\n    /**\n     * Handle touch move events when they occur in a back gesture.\n     *\n     * @private\n     * @param {!TouchEvent} e Touch end event.\n     */\n    backGestureTouchMove_(e) {\n        if (!this.history.length) return;\n\n        /* Google Chrome will fire a touchcancel event about 200 milliseconds\n         after touchstart if it thinks the user is panning/scrolling and you\n         do not call event.preventDefault(). */\n        e.preventDefault();\n        var clientX = e.changedTouches && e.changedTouches[0].clientX || 0;\n\n        var lastView = this.history[this.history.length - 1];\n        var currentView = this.currentView;\n        var currentViewDiff = clientX - this.firstX_;\n        var viewWidth = View.WIDTH;\n        var lastViewDiff = Math.floor(math.lerp(-viewWidth * 0.3, 0, currentViewDiff / (viewWidth - this.firstX_)));\n        var boxShadow = Math.floor(math.lerp(1, 0, currentViewDiff / (viewWidth - this.firstX_)) * 5) / 5;\n        var currentViewIndex = currentView.index\n        if (currentViewDiff < 0) return;\n\n        lastView.backGestureTouchMoveLastViewAnimation({lastViewDiff, currentViewIndex})\n        currentView.backGestureTouchMoveCurrentViewAnimation({currentViewDiff, boxShadow})\n    }\n\n\n    /**\n     * Close sidebar touch move functionality.\n     *\n     * @private\n     * @param {!TouchEvent} e\n     */\n    closeSidebarTouchMove_(e) {\n        var clientX = e.changedTouches && e.changedTouches[0].clientX || 0;\n\n        this.lastTouches_.push(this.firstX_ - clientX);\n\n        if (this.lastTouches_.length == 4) this.lastTouches_.shift();\n\n        /* Google Chrome will fire a touchcancel event about 200 milliseconds\n         after touchstart if it thinks the user is panning/scrolling and you\n         do not call event.preventDefault(). */\n        e.preventDefault();\n\n        var currentView = this.currentView;\n        var viewWidth = View.WIDTH;\n        var currentViewDiff = clientX - this.firstX_ - viewWidth * 4 / 5;\n        window.requestAnimationFrame(() => {\n            currentView.el.style.transitionDuration = '0s';\n            currentView.el.style.transform = `translate3d(${currentViewDiff}px, 0, ${currentView.index}px)`;\n        });\n    }\n\n\n    /**\n     * Toggles the sidebar on or off according to a given state.\n     *\n     * @private\n     * @param {boolean} state Whether to open or close the sidebar.\n     */\n    toggleSidebar_(state) {\n        var currentView = this.currentView,\n            sidebar = /** @type {HTMLElement} */(document.querySelector('sidebar'));\n\n        requestAnimationFrame(() => {\n            currentView.el.style.transitionDuration = '0.35s';\n\n            var currentViewX = `${128 - View.WIDTH}px`,\n                sidebarX = '0',\n                sidebarZ = `${currentView.index - 1}px`;\n\n            if (!state) {\n                currentViewX = '0';\n                sidebarX = '100%';\n                sidebarZ = '0';\n                this.hideSidebarTimeout_ = setTimeout(() => {\n                    if (this.state_ == ViewManager.State.DEFAULT)\n                        sidebar.style.transform = `translate3d(${sidebarX}, 0, ${sidebarZ})`;\n                }, 1000);\n            } else {\n                sidebar.style.transform = `translate3d(${sidebarX}, 0, ${sidebarZ})`;\n            }\n            currentView.el.style.transform = `translate3d(${currentViewX}, 0, ${currentView.index}px)`;\n        });\n\n        if (state)\n            this.state_ = ViewManager.State.SIDEBAR_OPEN;\n        else\n            this.state_ = ViewManager.State.DEFAULT;\n    }\n\n\n    /**\n     * Close sidebar touch move functionality.\n     *\n     * @private\n     * @param {!TouchEvent} e\n     */\n    openSidebarTouchMove_(e) {\n        if (ComponentManager.getInstance().gestureHandler.canTap) return;\n\n        var clientX = e.changedTouches && e.changedTouches[0].clientX || 0;\n        this.lastTouches_.push(this.firstX_ - clientX);\n\n        if (this.lastTouches_.length == 4) this.lastTouches_.shift();\n\n        /* Google Chrome will fire a touchcancel event about 200 milliseconds\n         after touchstart if it thinks the user is panning/scrolling and you\n         do not call event.preventDefault(). */\n        e.preventDefault();\n\n\n        var sidebar = /** @type {HTMLElement} */ (document.querySelector('sidebar'));\n        var currentView = this.currentView;\n        var currentViewDiff = clientX - this.firstX_;\n\n        if (currentViewDiff >= 0) return;\n        this.state_ = ViewManager.State.OPENING_SIDEBAR;\n\n        window.requestAnimationFrame(() => {\n            sidebar.style.transform = `translate3d(0, 0, ${currentView.index - 1}px)`;\n            sidebar.style.transitionDuration = '0s';\n\n            currentView.el.style.transitionDuration = '0s';\n            currentView.el.style.transform = `translate3d(${currentViewDiff}px, 0, ${currentView.index}px)`;\n        });\n    }\n}\n\n\n/**\n * @export\n *\n * View manager states.\n *\n * @enum {string}\n */\nViewManager.State = {\n    DEFAULT: 'default',\n    STARTED_GESTURE: 'started',\n    CLOSING_SIDEBAR: 'closingSidebar',\n    OPENING_SIDEBAR: 'openingSidebar',\n    SIDEBAR_OPEN: 'sidebarOpen',\n    GOING_TO_BACK_VIEW: 'going'\n};\n\n\n/**\n * 3d transform Z position for the uppermost view.\n * Used to set the right view on top.\n *\n * @private\n *\n * @type {number}\n */\nViewManager.prototype.topIndex_ = 1;\n\n\nwindow.requestAnimationFrame = (() => {\n    return window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        // @ts-ignore\n        window.mozRequestAnimationFrame ||\n        function(callback) {\n            window.setTimeout(callback, 1000 / 60);\n        };\n})();\n\n\nexport default ViewManager;\n","/**\n * The default language\n *\n * @type {string}\n */\nvar defaultLang_ = 'en';\n\nvar dictionaries_ = {\n    'en': {\n        '__name': 'English'\n    }\n};\n\nvar dictionary_ = dictionaries_[defaultLang_];\n\nconst setDictionary = (lang, dict) => {\n    dictionaries_[lang] = dict;\n};\n\n/**\n * Change the active dictionary\n *\n * @param {string} lang Language code.\n */\nconst setLanguage = (lang) => {\n    dictionary_ = dictionaries_[lang];\n};\n\n\n/**\n * Return translation of the given text\n *\n * Look for a translation from goog.require()'d scripts.\n * Replace the variables inside the translation.\n * Return the same text if no translation found.\n *\n * Pass in variables as integers inside curly brackets.\n * {0} will be replaced by first argument and so on.\n *\n * @param  {string}    text    Text to be translated.\n * @param  {...*}      args    Translation arguments.\n * @return {string}    Localized string.\n */\nconst getLocalizedString = (text, ...args) => {\n    var translation = dictionary_[text] || text;\n\n    return translation.replace(/{(\\d+)}/g, (match, number) => {\n        return typeof args[number] != 'undefined' ? args[number] : match;\n    });\n};\n\nexport default {\n    /**\n     * @export\n     */\n    setDictionary,\n\n    /**\n     * @export\n     */\n    setLanguage,\n\n    /**\n     * @export\n     */\n    getLocalizedString,\n\n    /**\n     * @export\n     */\n    __: getLocalizedString\n};\n","import Component from '../../lib/base/component';\n\n/**\n * @extends {Component}\n */\nclass Sidebar extends Component {\n    constructor() {\n        super();\n\n        /**\n         * @export\n         */\n        this.vm = null;\n    }\n\n    /**\n     * @export\n     *\n     * Dispatches a switch view event to listeners and toggles the sidebar of the view manager that\n     * is responsible for this sidebar.\n     *\n     * @param {!{targetEl: !Element}} e Tap event.\n     */\n    onSidebarItemTap(e) {\n        var view = e.targetEl && e.targetEl.getAttribute && e.targetEl.getAttribute('data-view');\n        if (!view) return;\n\n        this.emit(Sidebar.EventType.SWITCH_VIEW, {\n            view: view\n        });\n\n        this.vm && this.vm.toggleSidebar();\n    }\n\n\n    /**\n     * @override\n     */\n    template() {\n        return `\n<sidebar>\n    <sidebar-items>${this.template_items()}</sidebar-items>\n</sidebar>\n`;\n    }\n\n\n    /**\n     * @export\n     *\n     * @return {string} Returns the items for the sidebar.\n     */\n    template_items() {\n        return '';\n    }\n\n\n    /**\n     * @enum {string} Dom mapping.\n     */\n    get mappings() {\n        return {\n            ITEM: 'sidebar-item'\n        };\n    }\n\n    /**\n     * @override\n     */\n    get events() {\n        return {\n            'tap': {\n                [this.mappings.ITEM]: this.onSidebarItemTap\n            }\n        };\n    }\n\n    /**\n     * @export\n     */\n    static get EventType() {\n        return {\n            SWITCH_VIEW: 'switchView'\n        };\n    }\n\n}\n\nexport default Sidebar;\n","import View from '../../lib/view';\nimport ViewManager from '../../lib/view-manager';\n\n/**\n * @extends {View}\n */\nexport default class TabView extends View {\n    constructor() {\n        super();\n\n        /**\n         * @export\n         */\n        this.vm = null;\n\n        /**\n         * @export\n         *\n         * @type {!Array.<!View>}\n         */\n        this.views = [];\n\n        /**\n         * @export\n         */\n        this.activeItemIndex = null;\n    }\n\n    /**\n     * @override\n     */\n    onAfterRender() {\n        super.onAfterRender();\n\n        var $views = this.$(this.mappings.VIEWS);\n        if (!$views) throw new Error('TabView template must have <views>');\n\n        this.vm = new ViewManager($views);\n        this.activateItem(0);\n    }\n\n    /**\n     * @export\n     *\n     * @param {!{targetEl: !Element}} e Item touch event handler.\n     */\n    onItemTap(e) {\n        var activeItem = this.$(this.mappings.ACTIVE_ITEM);\n        if (activeItem && activeItem == e.targetEl) return;\n\n        var items = this.$(this.mappings.ITEMS);\n        var itemIndex = [].indexOf.call(items && items.children, e.targetEl);\n\n        this.activateItem(itemIndex);\n    }\n\n    /**\n     * @export\n     *\n     * Adds active class to item.\n     * @param {number} index Index of the item to be active.\n     */\n    activateItem(index) {\n        if (index < 0) return;\n\n        this.deactivateActiveItem();\n        var item = this.$$(this.mappings.ITEM)[index];\n        item && item.classList.add('active');\n\n        if (this.views && this.views[index]) {\n            this.vm.setCurrentView(this.views[index], true);\n            this.views[index].el.classList.add('active');\n        }\n\n        this.activeItemIndex = index;\n    }\n\n    /**\n     * @export\n     *\n     * Activates a tab bar item with a given name. If an item for the given the name isn't found, does nothing.\n     *\n     * @param {string} name Name for the tab bar item.\n     */\n    activateItemByName(name) {\n        var child = this.$(this.mappings.ITEM + '[data-view=' + name + ']');\n        if (!child) return;\n\n        var items = this.$(this.mappings.ITEMS);\n        var itemIndex = [].indexOf.call(items && items.children, child);\n\n        this.activateItem(itemIndex);\n    }\n\n\n    /**\n     * @export\n     *\n     * Removes active class of active item.\n     */\n    deactivateActiveItem() {\n        var activeThings = this.$$(this.mappings.ACTIVE);\n        activeThings.forEach(el => el.classList.remove('active'));\n    }\n\n\n\n    /**\n     * @override\n     * @return {string} Base template of NavigationBar component.\n     */\n    template() {\n        return `\n<tab-view>\n    ${this.template_views()}\n    <tab-bar>\n        <tab-items>\n            ${this.template_items()}\n        </tab-items>\n    </tab-bar>\n</tab-view>\n`;\n    }\n\n    /**\n     * @export\n     *\n     */\n    template_views() {\n        return `<views>${this.views.join('')}</views>`;\n    }\n\n    /**\n     * @export\n     *\n     * @return {string} Template for tab bar items.\n     */\n    template_items() {\n        return '';\n    }\n\n    /**\n     * @enum {string} Dom mappings.\n     */\n    get mappings() {\n        return {\n            ITEM: 'tab-item',\n            ITEMS: 'tab-items',\n            ACTIVE: '.active',\n            ACTIVE_ITEM: 'tab-items .active',\n            ACTIVE_VIEW: 'views .active',\n            VIEWS: 'views'\n        };\n    }\n\n    /**\n     * @override\n     */\n    get events() {\n        return {\n            'touchend': {\n                [this.mappings.ITEM]: this.onItemTap.bind(this)\n            }\n        }\n    }\n}\n","import Component from '../../lib/base/component';\n\n/**\n * @extends {Component}\n */\nclass NavBar extends Component {\n    /**\n     * Includes back button for back navigation.\n     *\n     * @param {NavBar.NavBarOptions=} opt_config Config parameters to\n     *        include things like title.\n     */\n    constructor(opt_config = {hasBackButton: false, hasMenuButton: false, title: ''}) {\n        super();\n\n        /**\n         * @export\n         */\n        this.vm = null;\n\n        /**\n         * @export\n         */\n        this.config = opt_config;\n    }\n\n    /**\n     * @export\n     *\n     * Back button tap event handler.\n     */\n    onBackButtonTap() {\n        this.vm && this.vm.push();\n    }\n\n    /**\n     * @export\n     */\n    onMenuButtonTap() {\n        this.vm && this.vm.toggleSidebar();\n    }\n\n    /**\n     * @override\n     */\n    template() {\n        var config = this.config,\n            backButton = '',\n            menuButton = '';\n\n        if (config.hasBackButton) backButton = `<back-button></back-button>`;\n        if (config.hasMenuButton) menuButton = `<menu-button></menu-button>`;\n\n        return `\n<nav-bar>${backButton}${menuButton}${config.title}</nav-bar>\n`;\n    }\n\n    get mappings() {\n        return {\n            BACK_BUTTON: 'back-button',\n            MENU_BUTTON: 'menu-button'\n        };\n    }\n\n    /** @override */\n    get events() {\n        return {\n            'tap': {\n                [this.mappings.BACK_BUTTON]: this.onBackButtonTap,\n                [this.mappings.MENU_BUTTON]: this.onMenuButtonTap\n            }\n        };\n    }\n}\n\n/**\n* @typedef {{hasBackButton: boolean, hasMenuButton: boolean, title: string}}\n*/\nNavBar.NavBarOptions = null;\n\nexport default NavBar;\n","import EventEmitter from '../../lib/base/eventemitter3';\n\n/**\n * Model for the pull to refresh component. Manages refreshing states to prevent\n * performance problems like double actions.\n *\n * @extends {EventEmitter}\n */\nexport default class P2RComponentModel extends EventEmitter {\n    constructor() {\n        super();\n\n        this.reset();\n\n        this.state_ = this.State.DEFAULT;\n    }\n\n    reset() {\n        this.state_ = this.State.DEFAULT;\n    }\n\n\n    /**\n     * If the component is not in REFRESHING state, it should check to see if it\n     * should refresh. This method will be triggered on every scroll event.\n     */\n    triggerShouldCheckState() {\n        if (this.state_ != this.State.REFRESHING)\n            this.state_ = this.State.SHOULD_CHECK;\n    }\n\n\n    /**\n     * Informs the caller if this model is in an appropriate state for checking\n     * the right (scroll) position.\n     *\n     * @return {boolean} Whether the component should check for the right\n     *                   (scroll) position.\n     */\n    shouldCheck() {\n        return this.state_ == this.State.SHOULD_CHECK;\n    }\n\n    /**\n     * Dispatches a refresh event to inform the parent component that it's at the appropriate\n     * position for refresh.\n     */\n    refresh() {\n        if (!this.shouldCheck()) return;\n\n        this.state_ = this.State.REFRESHING;\n\n        this.emit(this.EventType.SHOULD_REFRESH);\n    }\n\n\n\n    /**\n     * Pull to refresh states.\n     *\n     * @enum {string}\n     */\n    get State() {\n        return {\n            DEFAULT: 'default',\n            SHOULD_CHECK: 'shouldCheck',\n            REFRESHING: 'refreshing'\n        }\n    }\n\n\n    /**\n     * Event types for this model.\n     *\n     * @enum {string}\n     */\n    get EventType() {\n        return {\n            SHOULD_REFRESH: 'refresh'\n        }\n    }\n}\n","import Component from '../../lib/base/component';\nimport PullToRefreshModel from './pull-to-refresh-model';\n\n/**\n * @extends {Component}\n */\nexport default class PullToRefresh extends Component {\n    /**\n     * P2RComponent is a small component which checks the scroll position of a\n     * given DOM element, and if it's in\n     * an appropriate position, fires a REFRESH event for the parent component\n     * to act upon. When the parent component is\n     * done with refreshing, it should reset this P2RComponent with the\n     * reset() method.\n     *\n     * @param {!HTMLElement=} opt_el Optional element to track its scroll.\n     */\n    constructor(opt_el) {\n        super();\n\n        this.model = new PullToRefreshModel();\n\n        /**\n         * @export\n         */\n        this.EventType = this.model.EventType;\n        this.scrollEl = null;\n        this.containerEl = null;\n        this.scrollListener_ = null;\n        this.releaseListener_ = null;\n\n        if (opt_el) this.register(opt_el);\n\n        this.bindModelEvents();\n    }\n\n    bindModelEvents() {\n        this.model.on(this.model.EventType.SHOULD_REFRESH, this.onShouldRefresh.bind(this));\n    }\n\n    /**\n     * @export\n     *\n     * Triggered when the components decides a refresh action. This method should be overridden\n     * to, for example, display a spinner animation during refresh.\n     */\n    onShouldRefresh() {\n        var spinner = this.$(this.mappings.SPINNER);\n        var arrow = this.$(this.mappings.ARROW);\n\n        window.requestAnimationFrame(() => {\n            this.containerEl.style.transform = `translateY(${this.height}px)`;\n            this.containerEl.style.transition = '800ms cubic-bezier(.41,1,.1,1)';\n\n            if (spinner) spinner.style.opacity = '1';\n            if (arrow) arrow.style.opacity = '0';\n\n            this.emit(this.model.EventType.SHOULD_REFRESH);\n        });\n    }\n\n\n    /**\n     * @override\n     */\n    onAfterRender() {\n        super.onAfterRender();\n        if (!this.scrollEl) this.register(/** @type {HTMLElement} */(this.el.parentElement));\n    }\n\n\n    /**\n     * @export\n     *\n     * Resets the component state to default. This should be used to signal the\n     * end of refreshing so that this component\n     * can again check for pull to refresh.\n     */\n    reset() {\n        if (this.scrollEl) {\n            this.containerEl.style.transform = 'translateY(0)';\n            this.containerEl.style.transition = '300ms ease-out';\n        }\n\n        var spinner = this.$(this.mappings.SPINNER);\n        var arrow = this.$(this.mappings.ARROW);\n\n        if (spinner) spinner.style.opacity = '0';\n\n        setTimeout(() => {\n            if (arrow) arrow.style.opacity = '1';\n        }, 500);\n\n        this.model.reset();\n    }\n\n\n    /**\n     * @export\n     *\n     * Registers an element to track its scroll. This can be used for lazily introducing an element to track.\n     *\n     * @param {?HTMLElement} scrollEl Element to track.\n     * @param {?HTMLElement=} containerEl Element to offset during activity.\n     */\n    register(scrollEl, containerEl) {\n        if (!scrollEl) return;\n\n        if (this.scrollListener_)\n            this.scrollEl.removeEventListener('scroll', this.scrollListener_);\n        if (this.releaseListener_)\n            document.body.removeEventListener('touchend', this.releaseListener_);\n\n        this.scrollEl = scrollEl;\n\n        if (containerEl)\n            this.containerEl = containerEl;\n        else\n            this.containerEl = scrollEl;\n\n        this.reset();\n\n        this.scrollListener_ = this.onScroll_.bind(this);\n        this.releaseListener_ = this.onRelease_.bind(this);\n\n        this.scrollEl.addEventListener('scroll', this.scrollListener_);\n        document.body.addEventListener('touchend', this.releaseListener_);\n    }\n\n\n    /**\n     * Scroll event handler for pull to refresh.\n     *\n     * @private\n     *\n     * @param {!Event} e Scroll event object.\n     */\n    onScroll_(e) {\n        this.checkShouldRefresh();\n\n        var rot = 0,\n            scroll = -(e.target && /** @type {HTMLElement} */(e.target).scrollTop || 0),\n            pos = this.arrowOffset + Math.pow(scroll, 0.75),\n            rotationThreshold = this.threshold - 60;\n\n        if (scroll >= rotationThreshold)\n            rot = Math.min(180, (scroll - rotationThreshold) * 3);\n\n        var arrow = this.$(this.mappings.ARROW);\n\n        if (arrow)\n            arrow.style.transform = `translateY(${pos}px) rotate(${rot}deg)`;\n    }\n\n\n    /**\n     * Fires when the user lifts her finger to finish the scroll.\n     * If the user scrolled enough, inform the model to refresh\n     *\n     * @private\n     */\n    onRelease_() {\n        if (this.scrollEl.scrollTop < -this.threshold)\n            this.model.refresh();\n    }\n\n\n    /**\n     * If in an appropriate state, checks if the scroll position is right\n     * and if so triggers a refresh event.\n     */\n    checkShouldRefresh() {\n        this.model.triggerShouldCheckState();\n    }\n\n\n    /**\n     * @override\n     */\n    template() {\n        return `\n<pull-to-refresh>\n    <pull-to-refresh-arrow></pull-to-refresh-arrow>\n    <div class=\"spinner\"></div>\n</pull-to-refresh>\n`;\n    }\n\n\n    /**\n     * @override\n     */\n    dispose() {\n        this.model.removeAllListeners();\n        this.el && this.el.removeEventListener('scroll', this.scrollListener_);\n        document.body.removeEventListener('touchend', this.releaseListener_);\n\n        super.dispose();\n    }\n\n\n    /**\n     * @enum {string}\n     */\n    get mappings() {\n        return {\n            ARROW: 'pull-to-refresh-arrow',\n            SPINNER: '.spinner'\n        };\n    }\n}\n\n/**\n * @export\n *\n * Threshold value for the release action. Releases after this threshold will trigger a refresh.\n *\n * @type {number}\n */\nPullToRefresh.prototype.threshold = 135;\n\n\n/**\n * @export\n *\n * Height of this component. This setting is used to offset the scroll view while refreshing.\n *\n * @type {number}\n */\nPullToRefresh.prototype.height = 96;\n\n\n/**\n * @export\n *\n * Start position of the arrow. This is adjusted for a spring-like effect.\n *\n * @type {number}\n */\nPullToRefresh.prototype.arrowOffset = 0;\n","import EventEmitter from '../../lib/base/eventemitter3';\n\n/**\n * Model for the infinite scroll component. Manages loading states to prevent\n * performance problems like double actions.\n *\n * @extends {EventEmitter}\n */\nexport default class InfiniteScrollModel extends EventEmitter {\n    constructor() {\n        super();\n\n        this.state_ = this.State.DEFAULT;\n    }\n\n    /**\n     * Resets the component state to default state.\n     */\n    reset() {\n        this.state_ = this.State.DEFAULT;\n    }\n\n\n    /**\n     * If the component is not in LOADING state, it should check to see if it\n     * should load. This method will be triggered on every scroll event.\n     */\n    triggerShouldCheckState() {\n        if (this.state_ != this.State.LOADING)\n            this.state_ = this.State.SHOULD_CHECK;\n    }\n\n\n    /**\n     * Informs the caller if this model is in an appropriate state for checking\n     * the right (scroll) position.\n     *\n     * @return {boolean} Whether the component should check for the right\n     *                   (scroll) position.\n     */\n    shouldCheck() {\n        return this.state_ == this.State.SHOULD_CHECK;\n    }\n\n\n    /**\n     * Emits a load event to inform the parent component that it's at the\n     * end of a scroll and should load more items.\n     */\n    load() {\n        if (!this.shouldCheck()) return;\n\n        this.state_ = this.State.LOADING;\n\n        this.emit(this.EventType.SHOULD_LOAD);\n    }\n\n\n    /**\n     * Load more states.\n     *\n     * @enum {string}\n     */\n    get State() {\n        return {\n            DEFAULT: 'default',\n            SHOULD_CHECK: 'shouldCheck',\n            LOADING: 'loading'\n        }\n    }\n\n\n    /**\n     * Event types for this model.\n     *\n     * @enum {string}\n     */\n    get EventType() {\n        return {\n            SHOULD_LOAD: 'load'\n        }\n    }\n}\n","/*!\n * Throttle function\n *\n * https://remysharp.com/2010/07/21/throttling-function-calls\n *\n * Copyright (c) 2010 Remy Sharp\n */\n\n/**\n * @param {!Function} fn\n * @param {number} threshhold\n * @param {?Object=} scope\n */\nexport default (fn, threshhold, scope) => {\n    var last = 0,\n        deferTimer;\n\n    /**\n     * @param {...*} args\n     */\n    var rv = (...args) => {\n        /** @type {number} */\n        var now = +new Date;\n\n        if (last && (now < add(last, threshhold))) {\n            clearTimeout(deferTimer);\n            deferTimer = setTimeout(() => {\n                last = now;\n                fn.apply(scope, args);\n            }, threshhold + last - now);\n        } else {\n            last = now;\n            fn.apply(scope, args);\n        }\n    };\n\n    return rv;\n}\n\nfunction add(a, b) {\n    return a + b;\n}\n","import Component from '../../lib/base/component';\nimport InfiniteScrollModel from './infinite-scroll-model';\nimport throttle from '../../lib/throttle';\n\n/**\n * @extends {Component}\n */\nclass InfiniteScroll extends Component {\n    /**\n     * InfiniteScrollComponent is a small component which checks the scroll\n     * position of a given DOM element, and if it's in\n     * an appropriate position, fires a LOAD event for the parent component\n     * to act upon. When the parent component is\n     * done loading new items, it should reset this InfiniteScrollComponent\n     * with the reset() method.\n     *\n     * @param {!HTMLElement=} opt_el Optional element to track its scroll.\n     */\n    constructor(opt_el) {\n        super();\n        this.model = new InfiniteScrollModel();\n\n        /**\n         * @export\n         */\n        this.EventType = this.model.EventType;\n\n        this.scrollListener_ = null;\n        /** @type {HTMLElement} */\n        this.scrollEl = null;\n\n        /**\n         * Message to show when no more items are available to load.\n         *\n         * @type {string}\n         */\n        this.endOfListText = '';\n\n        this.throttle = throttle(this.checkShouldLoadMore_, 100, this);\n\n        if (opt_el) this.register(opt_el);\n        this.bindModelEvents();\n    }\n\n    bindModelEvents() {\n        this.model.on(this.model.EventType.SHOULD_LOAD, this.onShouldLoad.bind(this));\n    }\n\n    onShouldLoad() {\n        this.emit(this.EventType.SHOULD_LOAD);\n    }\n\n\n    /**\n     * @override\n     */\n    render(opt_base, opt_index) {\n        var rv = super.render(opt_base, opt_index);\n\n        if (!this.el) this.register(this.el.parentElement);\n\n        return rv;\n    }\n\n\n    /**\n     * @export\n     *\n     * Resets the component state to default. This should be used to signal\n     * the end of loading so that this component\n     * can again check for loading.\n     */\n    reset() {\n        this.model.reset();\n    }\n\n\n    /**\n     * @export\n     *\n     * Registers an element to track its scroll. This can be used for lazily introducing an element to track.\n     *\n     * @param {?HTMLElement} el Element to track.\n     */\n    register(el) {\n        if (!el) return;\n\n        this.reset();\n\n        this.scrollEl && this.scrollEl.removeEventListener('scroll', this.scrollListener_);\n\n        this.scrollEl = el;\n        this.scrollListener_ = this.onScroll_.bind(this);\n        this.scrollEl.addEventListener('scroll', this.scrollListener_);\n    }\n\n\n    /**\n     * Scroll event handler for infinite scroll. Fires the throttle to check for\n     * the correct load more position.\n     *\n     * @private\n     */\n    onScroll_() {\n        this.throttle();\n    }\n\n\n    /**\n     * If in an appropriate state, checks if the scroll position is right and if so triggers a load more event.\n     *\n     * @private\n     */\n    checkShouldLoadMore_() {\n        this.model.triggerShouldCheckState();\n        if (!this.model.shouldCheck()) return;\n\n        var el = this.scrollEl;\n        if (!el) return;\n\n        if (el.scrollHeight > el.offsetHeight && // the element can actually scroll\n            el.scrollTop > el.scrollHeight - el.offsetHeight - 400) // and we're in a good position to load more\n            this.model.load();\n    }\n\n\n    /**\n     * @export\n     *\n     * Shows spinner during load.\n     */\n    showSpinner() {\n        this.el.classList.add('spinner');\n        this.el.innerText = '';\n        this.reset();\n    }\n\n\n    /**\n     * @export\n     *\n     * Shows end of list message if no more items are available.\n     */\n    showEndOfList() {\n        this.el.innerText = this.endOfListText;\n        this.el.classList.remove('spinner');\n    }\n\n\n    /**\n     * @override\n     */\n    template() {\n        return `<inf-scroll></inf-scroll>`;\n    }\n\n\n    /**\n     * @override\n     */\n    dispose() {\n        this.model.removeAllListeners();\n        this.scrollEl.removeEventListener('scroll', this.scrollListener_);\n\n        super.dispose();\n    }\n}\n\nexport default InfiniteScroll;\n","export { default as use } from './lib/base/use';\nexport { default as Component } from './lib/base/component';\nexport { default as ViewManager } from './lib/view-manager';\nexport { default as View } from './lib/view';\nexport { default as locale } from './lib/locale';\nexport { default as Sidebar } from './components/sidebar/sidebar';\nexport { default as TabView } from './components/tab-view/tab-view';\nexport { default as NavBar } from './components/navbar/navbar';\nexport { default as PullToRefresh } from './components/pull-to-refresh/pull-to-refresh';\nexport { default as InfiniteScroll } from './components/infinite-scroll/infinite-scroll';\n\nimport use from './lib/base/use';\nimport Component from './lib/base/component';\nimport ViewManager from './lib/view-manager';\nimport View from './lib/view';\nimport locale from './lib/locale';\nimport Sidebar from './components/sidebar/sidebar';\nimport TabView from './components/tab-view/tab-view';\nimport NavBar from './components/navbar/navbar';\nimport PullToRefresh from './components/pull-to-refresh/pull-to-refresh';\nimport InfiniteScroll from './components/infinite-scroll/infinite-scroll';\n\n\n/** @export */\nconst erste = {\n    /** @export */\n    Component: Component,\n    /** @export */\n    ViewManager: ViewManager,\n    /** @export */\n    View: View,\n    /** @export */\n    locale: locale,\n    /** @export */\n    Sidebar: Sidebar,\n    /** @export */\n    TabView: TabView,\n    /** @export */\n    NavBar: NavBar,\n    /** @export */\n    PullToRefresh: PullToRefresh,\n    /** @export */\n    InfiniteScroll: InfiniteScroll,\n    /** @export */\n    __: locale.__\n}\n\n/** @export */\nerste.use = use.bind(erste)\n\nexport default erste;\n\nexport const __ = locale.__;\n","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview The base component class.\r\n */\r\n\r\n\r\nimport {Component as ErsteComponent} from 'erste';\r\n\r\n/**\r\n * Component is from ersteJS.\r\n * \r\n * @extends {ErsteComponent}\r\n */\r\nclass Component extends ErsteComponent {\r\n\r\n    constructor() {\r\n        super();\r\n        this.model = null;\r\n        this.children = [];\r\n    }\r\n\r\n    /**\r\n     * Listens to the model's events. This method should be overridden by the implementer, and should keep the model's event\r\n     * listeners.\r\n     * @protected\r\n     */\r\n    bindModelEvents() {}\r\n\r\n    setModel(model) {\r\n        this.model = model;\r\n    }\r\n\r\n    getChild(id) {\r\n        return this.children[id].content;\r\n    }\r\n\r\n    getChildIds() {\r\n        return this.children.map((child) => child.id);\r\n    }\r\n\r\n    /**\r\n     * Returns the child components of this component (if any).\r\n     * @return {Array.<Component>} Child components.\r\n     */\r\n    getChildren() {\r\n        let ids = this.getChildIds(),\r\n            that = this;\r\n\r\n        return ids.map((id) => that.getChild(id))\r\n    }\r\n\r\n\r\n    addChild(child, opt_render=true) {\r\n        if(opt_render != false) {\r\n            opt_render = true;\r\n            this.el.appendChild(child);\r\n        }\r\n        this.children.push({id: child.id, content: child, render: opt_render}); \r\n    }\r\n\r\n    addChildAt(child, index, opt_render=true) {\r\n        this.children.splice(index, 0, {id: child.id, content: child, render: opt_render});\r\n        if (opt_render != false) {\r\n            opt_render = true;\r\n            this.el.appendChild(child);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds the specified children to this component, appending at the end.\r\n     * \r\n     * @param {Array.<Component>} children The new child components.\r\n     * @param {boolean=} opt_render If false, the child component will not be rendered into the parent.\r\n     */\r\n    addChildren(children, opt_render=true) {\r\n        let that = this;\r\n        children.forEach((child) => {\r\n            that.addChild(child, opt_render);\r\n        }, this);\r\n    }\r\n\r\n\r\n    remove_child(child, opt_unrender) {\r\n        this.children.filter((item) => item.id !== child.id);\r\n        this.el.removeChild(child);\r\n    }\r\n\r\n\r\n    disposeInternal() {\r\n        super.dispose();\r\n\r\n        this.model && this.model.dispose && this.model.dispose();\r\n        this.model = null;\r\n    }\r\n}\r\n\r\nexport default Component;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview IConnectableModel interface for consistent routing. All the connectable component models should\r\n * implement this interface.\r\n */\r\n\r\n /**\r\n  * IConnectableModel interface. Sports connect method for output and setInput method for input.\r\n  * @interface\r\n  */\r\nclass IConnectableModel {    \r\n    /**\r\n     * Connects the output of this IConnectableModel to a node.\r\n     * \r\n     * @param {AudioNode} destination Destination node to connect the output of this IConnectableModel.\r\n     */\r\n    connect(destination) {}\r\n    \r\n    /**\r\n     * Disconnects the output of this IConnectableModel\r\n     */\r\n    disconnect() {}\r\n    \r\n    /**\r\n     * Sets the previous node of this IConnectableModel.\r\n     * \r\n     * @param {AudioNode} prev The node that will be connected to the input of this IConnectableModel.\r\n     */\r\n    setPrev(prev) {}\r\n\r\n    /**\r\n     * Gets the input of a IConnectableModel.\r\n     * \r\n     * @return {!(AudioNode|AudioParam)} The input of this IConnectableModel.\r\n     */\r\n    getInput() {}\r\n\r\n    /**\r\n     * Gets the output of a IConnectableModel.\r\n     * \r\n     * @return {!(AudioNode|AudioParam)} The output of this IConnectableModel.\r\n     */\r\n    getOutput() {}\r\n}\r\n\r\nexport default IConnectableModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base connectable component model. Hosts input and output buffer, chain and effects base.\r\n */\r\n\r\nimport IConnectableModel from \"../IConnectableModel\";\r\nimport Component from \"../ui/Component\";\r\n\r\n/**\r\n * Component model for base connectables.\r\n * \r\n * @implements {IConnectableModel}\r\n * @extends {Component}\r\n */\r\nclass ConnectableModel extends Component {\r\n    \r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super();\r\n\r\n        this.context = context;\r\n\r\n        this.prev = null;\r\n        this.next = null;\r\n\r\n        /**\r\n         * @type {Array.<!AudioNode>}\r\n         */\r\n        this.chain = [];\r\n            \r\n        /**\r\n         * @type {Array.<AudioNode>}\r\n         */\r\n        this.effects = [];\r\n\r\n        /**\r\n         * @type {!GainNode}\r\n         * @protected\r\n         */\r\n        this.inputBuffer = this.context.createGain();\r\n        \r\n        /**\r\n         * @type {!GainNode}\r\n         * @protected\r\n         */\r\n        this.outputBuffer = this.context.createGain();\r\n    }\r\n\r\n    /**\r\n     * Connects the output of the audio node of this model to another audio node.\r\n     * @override\r\n     * @param {AudioNode} destination Next audio node where the output of this model's node will connect to. \r\n     */\r\n    connect(destination) {\r\n        this.next = destination;\r\n        this.chain = [].concat(this.inputBuffer, this.effects, this.outputBuffer, this.next);\r\n\r\n        this.routeInternal();\r\n    }\r\n\r\n    /**\r\n     * Gets the input buffer of a pedal.\r\n     * @override\r\n     * @return {!(AudioNode|AudioParam)} The input buffer of this component.\r\n     */\r\n    getInput() {\r\n        return this.inputBuffer;\r\n    }\r\n\r\n    /**\r\n     * Gets the output buffer of a pedal.\r\n     * @override\r\n     * @return {!(AudioNode|AudioParam)} The output buffer of this component.\r\n     */\r\n    getOutput() {\r\n        return this.outputBuffer;\r\n    }\r\n\r\n    /**\r\n     * Lets the model know who is connected to its effects node.\r\n     * @override\r\n     * @param {AudioNode} prev Previous node who is connected to this model's effects node.\r\n     */\r\n    setPrev(prev) {\r\n        this.prev = prev;\r\n    }\r\n\r\n    /**\r\n     * Routes the internal effects chain.\r\n     */\r\n    routeInternal() {\r\n        let chain = this.chain;\r\n        for(let i = 0, len = chain.length - 1; i < len; i++) {\r\n            chain[i].connect(chain[i + 1]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disconnects the output buffer of this pedal.\r\n     * @override\r\n     */\r\n    disconnect() {\r\n        this.outputBuffer.disconnect();\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    disposeInternal() {\r\n        super.disposeInternal();\r\n        this.disconnect();\r\n    }\r\n}\r\n\r\nexport default ConnectableModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview IConnectable interface for consistent routing between higher level stomp box components.\r\n * All the connectable pedal components and IO should implement this interface.\r\n */\r\n\r\n/**\r\n * IConnectable interface. Sports connect method for output and setInput method for input.\r\n * @interface\r\n */\r\n\r\nclass IConnectable {\r\n    /**\r\n     * Connects the output of this IConnectable to a node.\r\n     * \r\n     * @param {IConnectable} destination Destination node to connect the output of this IConnectable.\r\n     */\r\n    connect(destination) {}\r\n\r\n    /**\r\n     * Disconnects the output of this IConnectable.\r\n     */\r\n    disconnect() {}\r\n\r\n    /**\r\n     * Sets the input of this IConnectable to a node.\r\n     * \r\n     */\r\n    setPrev(prev) {}\r\n\r\n    /**\r\n     * Gets the main effects unit of a IConnectable, which is also the input node.\r\n     * \r\n     * @return {!(AudioNode|AudioParam)} The effect node of the IConnectable.\r\n     */\r\n    getInput() {}\r\n\r\n    /**\r\n     * Gets the output buffer of a pedal.\r\n     *\r\n     * @return {!(AudioNode|AudioParam)} The output buffer of this component.\r\n     */\r\n    getOutput() {}\r\n}\r\n\r\nexport default IConnectable;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Output abstraction for a given audio context. There can only be one output per audio context, and this\r\n * class is an abstraction of it that also implements the pb.Connectable interface so that it can be chained after\r\n * a pb.stomp.BoxModel.\r\n */\r\n\r\nimport IConnectable from \"../IConnectable\";\r\n\r\n/**\r\n * The output wrapper for an audio context.\r\n *\r\n * @implements {IConnectable}\r\n */\r\nclass Output {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context for this output.\r\n     */\r\n    constructor(context) {\r\n        this.source = context.destination; // creates a sound source\r\n        this.prev = null;\r\n    }\r\n\r\n    /**\r\n     * Gets the destination node.\r\n     * @override\r\n     * @return {!(AudioNode|AudioParam)} The final node in the signal chain.\r\n     */\r\n    getInput() {\r\n        return this.source;\r\n    }\r\n\r\n    /**\r\n     * Lets the output know who is connected to it.\r\n     * @override\r\n     * @param {IConnectable} prev Input node.\r\n     */\r\n    setPrev(prev) {\r\n        this.prev = prev;\r\n    }\r\n\r\n    /**\r\n     * Dummy method for the Connectable interface. It's meaningless for an output to be connected to another Connectable.\r\n     * It's already the final node in the signal chain.\r\n     * \r\n     * @override\r\n     */\r\n    connect(destination) {}\r\n\r\n    /**\r\n     * Dummy method for the Connectable interface. It's meaningless for an output to have an output.\r\n     * @override\r\n     */\r\n    getOutput() {}\r\n\r\n    /**\r\n     * Dummy method for the Connectable interface. The output is never connected to anything else.\r\n     * \r\n     * @override\r\n     */\r\n    disconnect() {}\r\n}\r\n\r\nexport default Output;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport Component from \"../ui/Component\";\r\nimport ConnectableModel from \"./ConnectableModel\";\r\nimport IConnectable from \"../IConnectable\";\r\nimport Output from \"../io/Output\";\r\n\r\n/**\r\n * Base component.\r\n *\r\n * @extends {Component}\r\n * @implements {IConnectable}\r\n */\r\nclass Connectable extends Component {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will work on.\r\n     */\r\n    constructor(context) {\r\n        super();\r\n        this.modelClass = ConnectableModel;\r\n        this.setModel(new this.modelClass(context));\r\n        this.createChildComponents();\r\n        this.bindModelEvents();\r\n        this.components = null;\r\n    }\r\n\r\n    /**\r\n     * Creates child components such as pots and switches.\r\n     */\r\n    createChildComponents() {\r\n        this.components = [];\r\n    }\r\n\r\n    /**\r\n     * Gets the input buffer of a pedal.\r\n     * @override\r\n     * @return {!(AudioNode|AudioParam)} The input buffer of this component.\r\n     */\r\n    getInput() {\r\n        return this.model.getInput();\r\n    }\r\n\r\n    /**\r\n     * Gets the output buffer of a pedal.\r\n     * @override\r\n     * @return {!(AudioNode|AudioParam)} The output buffer of this component.\r\n     */\r\n    getOutput() {\r\n        return this.model.getOutput();\r\n    }\r\n\r\n    /**\r\n     * Lets the pedal instance know who is connected to its input.\r\n     * @override\r\n     * @param {IConnectable} prev Previous pedal whose output will connect to this pedal's input.\r\n     */\r\n    setPrev(prev) {\r\n        this.model.setPrev(prev.getOutput());\r\n    }\r\n\r\n    /**\r\n     * Connects the output of this pedal to another pedal.\r\n     * @override\r\n     * @param {IConnectable|Output} destination Next pedal where the output of this pedal will connect to.\r\n     */\r\n    connect(destination) {\r\n        destination.setPrev(this);\r\n        this.model.connect(destination.getInput());\r\n    }\r\n    \r\n    /**\r\n     * Disconnects the output of this pedal.\r\n     * @override\r\n     */\r\n    disconnect() {\r\n        this.model.disconnect();\r\n    }\r\n}\r\n\r\nexport default Connectable;","export { default as Connectable } from './Connectable'\r\nexport { default as ConnectableModel } from './ConnectableModel'","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base switch component model.\r\n */\r\n\r\nimport EventEmitter from \"erste/src/lib/base/eventemitter3\";\r\n\r\n/**\r\n * @extends {EventEmitter}\r\n * \r\n */\r\nclass SwitchModel extends EventEmitter {\r\n    \r\n    /**\r\n     * \r\n     * @param {string=} opt_name Name of the switch. Will be written under it.\r\n     */\r\n    constructor(opt_name) {\r\n        super();\r\n        this.name = opt_name;\r\n        this.nodes = [[], [], []];\r\n        this.state = false;   \r\n    } \r\n\r\n    /**\r\n     * Toggles the switch and fires an event accordingly.\r\n     */\r\n    toggle() {\r\n        let oldState = this.state,\r\n            eventType;\r\n\r\n        this.state = !this.state;\r\n\r\n        if (this.state) this.turnOn();\r\n        else this.turnOff();\r\n\r\n        eventType = this.state ? SwitchModel.EventType.ON : \r\n            SwitchModel.EventType.OFF;\r\n\r\n        this.emit(eventType, this.state, oldState)\r\n    }\r\n\r\n    /**\r\n     * Fired when the switch should be toggled on. Toggles internal nodes; middle nodes are connected to the first.\r\n     */\r\n    turnOn() {\r\n        let work = function(nodes) {\r\n            nodes[1].disconnect();\r\n            if (nodes[0]) nodes[1].connect(nodes[0]);\r\n        }\r\n\r\n        this.nodes.forEach((nodes) => {\r\n            if(nodes) {\r\n                ((nodes) => {\r\n                    work(nodes);\r\n                    setTimeout(() => {\r\n                        work(nodes);\r\n                    }, 10);\r\n                })(nodes);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fired when the switch should be toggled off. Toggles internal nodes; middle nodes are connected to the third.\r\n     */\r\n    turnOff() {\r\n        let work = function(nodes) {\r\n            nodes[1].disconnect();\r\n            if (nodes[2]) nodes[1].connect(nodes[2]);\r\n        }\r\n\r\n        this.nodes.forEach((nodes) => {\r\n            ((nodes) => {\r\n                work(nodes);\r\n                setTimeout(() => {\r\n                    work(nodes);\r\n                }, 10);\r\n            })(nodes);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Sets the nodes this switch will toggle.\r\n     * \r\n     * @param {Array.<Array.<AudioNode>>} nodes Nodes of this switch.\r\n     */\r\n    setNodes(nodes) {\r\n        this.nodes = nodes;\r\n\r\n        // Kick off toggling. Since this.toggle will invert the state and we just want to make an initial event dispatch,\r\n        // we invert the state; so that toggle will correct it and dispatch the correct event.\r\n        this.state = !this.state;\r\n        this.toggle();\r\n    }\r\n}\r\n\r\nSwitchModel.EventType = {ON: 'on', OFF: 'off'};\r\n\r\nexport default SwitchModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base switch component model.\r\n */\r\n\r\nimport SwitchModel from \"../Switch/SwitchModel\";\r\n\r\n/**\r\n * @extends {SwitchModel}\r\n * \r\n */\r\nclass MomentaryModel extends SwitchModel {\r\n\r\n    /**\r\n     * \r\n     * @param {string=} opt_name Name of the switch. Will be written under it.\r\n     */\r\n    constructor(opt_name) {\r\n        super(opt_name);\r\n        this.state = false;\r\n    }\r\n}\r\n\r\nexport default MomentaryModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base switch component.\r\n */\r\n\r\nimport SwitchModel from \"./SwitchModel\";\r\nimport Component from \"../../ui/Component\";\r\n// import ComponentManager from \"erste/src/lib/base/component-manager\";\r\n\r\n/**\r\n * Switch component models a footswitch. This base class is used to toggle stompbox nodes.\r\n *\r\n * @extends {Component}\r\n *\r\n */\r\nclass Switch extends Component {\r\n  \r\n  /**\r\n   * \r\n   * @param {string=} opt_name Name of the switch. Will be written under it.\r\n   */\r\n  constructor(opt_name) {\r\n    super();\r\n    this.model = new this.modelClass(opt_name);\r\n    this.modelClass = SwitchModel;\r\n    this.mappings = {\r\n      BUTTON: \".button\",\r\n    };\r\n\r\n    // this.events = {\r\n    //   [ComponentManager.events['mousedown']]: {\r\n    //     [this.mappings.BUTTON]: this.toggle,\r\n    //   },\r\n    // };\r\n  }\r\n\r\n  /**\r\n   * Sets the nodes this switch will toggle.\r\n   *\r\n   * @param {Array.<Array.<AudioNode>>} nodes Nodes of this switch.\r\n   */\r\n  setNodes(nodes) {\r\n    this.model.setNodes(nodes);\r\n  }\r\n\r\n  /**\r\n   * Returns the current state of the switch. Return value is true if the switch is on, and false if otherwise.\r\n   *\r\n   * @return {boolean} Whether the switch is on or off.\r\n   */\r\n  getState() {\r\n    return this.model.state;\r\n  }\r\n\r\n  /**\r\n   * Toggles the switch.\r\n   */\r\n  toggle() {\r\n    this.model.toggle();\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  template() {\r\n    return `<div class=\"switch\">\r\n                    <div class=\"button\"></div>\r\n                    ${this.templates_name()}\r\n                </div>`\r\n  }\r\n\r\n  /**\r\n   * @return {string} Name template. Returns empty string if no name is given.\r\n   */\r\n  templates_name() {\r\n    return this.model.name ? `<div class=\"name\">${this.model.name}</div>` : \"\";\r\n  }\r\n}\r\n\r\nexport default Switch;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base switch component.\r\n */\r\n\r\nimport MomentaryModel from \"./MomentaryModel\"\r\nimport Switch from \"../Switch/Switch\"\r\n// import ComponentManager from \"erste/src/lib/base/component-manager\";\r\n\r\n/**\r\n * Momentary switch component models a Momentary footswitch. It's on as long as you press it and turns off when you\r\n * release.\r\n * \r\n * @extends {Switch}\r\n * \r\n */\r\nclass Momentary extends Switch {\r\n    /**\r\n     * \r\n     * @param {string=} opt_name Name of the switch. Will be written under it.\r\n     */\r\n    constructor(opt_name) {\r\n        super(opt_name);\r\n\r\n        this.state = false;\r\n        this.modelClass = MomentaryModel;\r\n        // this.events = {\r\n        //     [ComponentManager.events['mousedown']]: {\r\n        //         [this.mappings.BUTTON]: this.toggle\r\n        //     }\r\n        // }\r\n    }   \r\n}\r\n\r\nexport default Momentary;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base switch component model.\r\n */\r\n\r\nimport SwitchModel from \"../Switch/SwitchModel\";\r\n\r\n/**\r\n * @extends {SwitchModel}\r\n * \r\n */\r\nclass ToggleModel extends SwitchModel {\r\n\r\n   /**\r\n    * \r\n    * @param {string=} opt_name Name of the switch. Will be written under it.\r\n    */\r\n   constructor(opt_name) {\r\n      super(opt_name);\r\n      this.state = true;\r\n   }\r\n}\r\n\r\nexport default ToggleModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base switch component.\r\n */\r\n\r\nimport Switch from \"../Switch/Switch\";\r\nimport ToggleModel from \"./ToggleModel\";\r\n\r\n\r\n/**\r\n * Toggle switch component models a toggle footswitch. It's on after you press it once and stays on until you press it\r\n * a second time when it will then be off.\r\n *\r\n * @extends {Switch}\r\n *\r\n */\r\nclass Toggle extends Switch {\r\n    /**\r\n     * \r\n     * @param {string=} opt_name Name of the switch. Will be written under it.\r\n     */\r\n    constructor(opt_name) {\r\n        super(opt_name);\r\n        this.modelClass = ToggleModel;\r\n    }\r\n}\r\n\r\nexport default Toggle;","export { default as Momentary } from './Momentary/Momentary'\r\nexport { default as MomentaryModel } from './Momentary/MomentaryModel'\r\nexport { default as Switch } from './Switch/Switch'\r\nexport { default as SwitchModel } from './Switch/SwitchModel'\r\nexport { default as Toggle } from './toggle/Toggle'\r\nexport { default as ToggleModel } from './toggle/ToggleModel'","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Input abstraction for an audio context. There can be many input sources in an audio context and this\r\n * class is an abstraction of an input that also implements the pb.Connectable interface so that it can be chained\r\n * before a pb.stomp.BoxModel.\r\n */\r\n\r\nimport IConnectable from \"../IConnectable\";\r\nimport EventEmitter from \"erste/src/lib/base/eventemitter3\";\r\n\r\n/**\r\n * The input wrapper for an audio context.\r\n * \r\n * @extends {EventEmitter}\r\n */\r\nclass Input extends EventEmitter {\r\n    \r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context for this input.\r\n     */\r\n    constructor(context) {\r\n        super();\r\n        this.source = context.createBufferSource(); // creates a sound source\r\n        this.source.loop = true;\r\n        this.state = Input.State.NOT_STARTED;\r\n        this.source.addEventListener('ended', this.onEnded.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Starts playing the input.\r\n     * \r\n     * @param {number=} opt_time Milliseconds after whom this input will start playing.\r\n     */\r\n    play(opt_time) {\r\n        if(this.state == Input.State.NOT_STARTED) {\r\n            this.source.start(opt_time || 0);\r\n            this.state = Input.State.PLAYING;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Stops playing the input.\r\n     * \r\n     * @param {number=} opt_time Milliseconds after whom this input will stop playing.\r\n     */\r\n    stop(opt_time) {\r\n        if(this.state == Input.State.PLAYING) {\r\n            this.source.stop(opt_time || 0);\r\n            this.state = Input.State.FINISHED;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the source buffer of this input.\r\n     * \r\n     * @protected\r\n     * @param {AudioBuffer} sourceBuffer The new buffer.\r\n     */\r\n    setSourceBuffer(sourceBuffer) {\r\n        this.source.buffer = sourceBuffer;\r\n    }\r\n\r\n    /**\r\n     * Connects this input to a destination pedal.\r\n     * \r\n     * @param {IConnectable} destination Next pedal where this input will connect to.\r\n     */\r\n    connect(destination) {\r\n        destination.setPrev(this);\r\n        this.source.connect(destination.getInput());\r\n    }\r\n\r\n    /**\r\n     * Disconnects this input from wherever it's connected to.\r\n     */\r\n    disconnect() {\r\n        this.source.disconnect();\r\n    }\r\n\r\n    /**\r\n     * Gets the source of this input.\r\n     * \r\n     * @return {AudioBufferSourceNode} The source of this input.\r\n     */\r\n    getOutput() {\r\n        return this.source;\r\n    }\r\n\r\n    /**\r\n     * Handler for the end event. When the playback of the input ends, this method correctly sets the State to FINISHED.\r\n     */\r\n    onEnded() {\r\n        this.state = Input.State.FINISHED;\r\n    }\r\n\r\n    /**\r\n     * Dummy method for the Connectable interface. It's meaningless for an input to be connected to the output of another\r\n     * thing.\r\n     */\r\n    setPrev() {}\r\n\r\n    /**\r\n     * Dummy method for the Connectable interface. It's meaningless for an input to have an input.\r\n     */\r\n    getInput() {}\r\n}\r\n\r\n/**\r\n* Playback states that partially fulfills the deprecated playbackState in Web Audio API. Basically it helps to avoid\r\n* exceptions when start or stop is called inappropriately.\r\n*\r\n* @enum {string}\r\n*/\r\nInput.State = {\r\n   NOT_STARTED: 'notStarted',\r\n   PLAYING: 'playing',\r\n   FINISHED: 'finished'\r\n};\r\n\r\nexport default Input;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview File input reads a given file as an input buffer.\r\n */\r\n\r\nimport Input from \"./Input\";\r\n\r\n/**\r\n * Reads a file at a given URL, converts it to a source buffer and makes it available for the context.\r\n * \r\n * @extends {Input}\r\n */\r\nclass FileInput extends Input {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Context for this input.\r\n     * @param {string} url URL for the input file.\r\n     */\r\n    constructor(context, url) {\r\n        super(context);\r\n\r\n        let that = this,\r\n            request = new XMLHttpRequest();\r\n\r\n        request.open('GET', url, true);\r\n        request.responseType = 'arraybuffer';\r\n\r\n        request.onload  = function() {\r\n            context.decodeAudioData(/** @type {!ArrayBuffer} */(request.response), (buffer) => {\r\n                that.setSourceBuffer(buffer);\r\n                that.emit('loaded');\r\n            });\r\n        }\r\n        request.send();\r\n    }\r\n}\r\n\r\nexport default FileInput;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Input abstraction for an audio context. There can be many input sources in an audio context and this\r\n * class is an abstraction of an input that also implements the pb.Connectable interface so that it can be chained\r\n * before a pb.stomp.BoxModel.\r\n */\r\n\r\nimport Input from \"./Input\";\r\n\r\n/**\r\n * The input wrapper for an audio context.\r\n *\r\n * @extends {Input}\r\n */\r\nclass StreamInput extends Input {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context for this input.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        var that = this;\r\n        var getUserMedia = navigator.getUserMedia;\r\n        getUserMedia({\r\n            'audio': {\r\n                'mandatory': {\r\n                    'echoCancellation': false,\r\n                    'googEchoCancellation': false,\r\n                    'googEchoCancellation2': false,\r\n                    'googAutoGainControl': false,\r\n                    'googNoiseSuppression': false,\r\n                    'googNoiseSuppression2': false\r\n                    //'googHighpassFilter': false // this is currently buggy.\r\n                }\r\n            }\r\n        }, (stream) => {\r\n            that.disconnect();\r\n            that.source = context.createMediaStreamSource(stream);\r\n            that.emit('loaded');\r\n        }, (err) => {\r\n            throw new Error(err);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    stop() {\r\n        this.source.disconnect();\r\n    }\r\n}\r\n\r\nexport default StreamInput;","export { default as Input } from './Input'\r\nexport { default as FileInput } from './FileInput'\r\nexport { default as StreamInput } from './StreamInput'\r\nexport { default as Output } from './Output'","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Library module for math functions.\r\n */\r\n\r\nclass Coordinate {\r\n    constructor(opt_x, opt_y) {\r\n        /**\r\n         * X-value\r\n         * @type {number}\r\n         */\r\n        this.x = (opt_x !== undefined) ? opt_x : 0;\r\n    \r\n        /**\r\n         * Y-value\r\n         * @type {number}\r\n         */\r\n        this.y = (opt_y !== undefined) ? opt_y : 0;\r\n    }\r\n};\r\n\r\n/**\r\n * Returns the last element in an array without removing it.\r\n * @param {IArrayLike<T>|string} array The array.\r\n * @return {T} Last item in array.\r\n * @template T\r\n */\r\nconst peek = (array) => {\r\n    return array[array.length - 1];\r\n}\r\n\r\n/**\r\n * Performs linear interpolation between values a and b. Returns the value\r\n * between a and b proportional to x (when x is between 0 and 1. When x is\r\n * outside this range, the return value is a linear extrapolation).\r\n * @param {number} a A number.\r\n * @param {number} b A number.\r\n * @param {number} x The proportion between a and b.\r\n * @return {number} The interpolated value between a and b.\r\n */\r\nconst lerp = (a, b, x) => {\r\n    return a + x * (b - a);\r\n};\r\n\r\n/**\r\n * Takes a number and clamps it to within the provided bounds.\r\n * @param {number} value The input number.\r\n * @param {number} min The minimum value to return.\r\n * @param {number} max The maximum value to return.\r\n * @return {number} The input number if it is within bounds, or the nearest\r\n *     number within the bounds.\r\n */\r\nconst clamp = (value, min, max) => {\r\n    return Math.min(Math.max(value, min), max);\r\n};\r\n\r\nexport default {\r\n    Coordinate: Coordinate,\r\n    peek: peek,\r\n    lerp: lerp,\r\n    clamp: clamp\r\n}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base pot component model.\r\n */\r\n\r\nimport EventEmitter from \"erste/src/lib/base/eventemitter3\";\r\nimport math from \"../../../lib/math\";\r\n\r\n/**\r\n * @extends {EventEmitter}\r\n *\r\n */\r\nclass PotModel extends EventEmitter {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioParam|Function} param Audio parameter this pot will adjust. Can be gain, etc.\r\n     * @param {string} name Name of the pot. Will be written under it.\r\n     * @param {number} multiplier The multiplier of the effect. Some effects (such as gain) need this to be on the order of\r\n     *                       thousands.\r\n     * @param {number=} opt_max Optional minimum value for the pot. Default value is 0.\r\n     * @param {number=} opt_min Optional maximum value for the pot. Default value is 1.\r\n     * @param {number=} opt_default Optional default value for the pot. Default value is 0.5.\r\n     */\r\n    constructor(param, name, multiplier, opt_min, opt_max, opt_default) {\r\n        super();\r\n\r\n        if(param instanceof Function)\r\n            this.callback = param\r\n        else\r\n            this.param = param;\r\n\r\n        this.minValue = opt_min || 0;\r\n        this.maxValue = opt_max || 1;\r\n        this.defaultValue = opt_default || 0.5;\r\n\r\n        this.name = name;\r\n        this.multiplier = multiplier;\r\n        this.value = this.minValue;\r\n\r\n        this.setValue(this.defaultValue);\r\n    }\r\n\r\n    /**\r\n     * Sets the new value for this pot's audio parameter and lets whoever listens hear about it. This method sanitizes\r\n     * the input and calls processValue, which actually sets it as the value of this PotModel. This approach lets\r\n     * subclasses to skip input sanitization and event dispatching.\r\n     *\r\n     * @param {number} newValue New value to be set.\r\n     */\r\n    setValue(newValue) {\r\n        let oldValue = this.value;\r\n\r\n        newValue = math.clamp(newValue, 0, 1);\r\n        this.processValue(newValue, oldValue);\r\n\r\n\r\n        if (this.param)\r\n            this.param.value = this.value;\r\n        else\r\n            this.callback(this.value, oldValue);\r\n\r\n        this.emit(PotModel.EventType.VALUE_CHANGED, this.value, oldValue);\r\n    }\r\n\r\n    /**\r\n     * Processes the sanitized input, sets it to value parameter. Generally, this is a function of a value and a multiplier,\r\n     * and maybe the old value.\r\n     *\r\n     * @protected\r\n     * @param {number} newValue The sanitized pot value.\r\n     * @param {number} oldValue The old value of this PotModel.\r\n     */\r\n    processValue(newValue, oldValue) {\r\n        this.value = math.lerp(this.minValue, this.maxValue, newValue) * this.multiplier;\r\n    }\r\n\r\n    /**\r\n     * @return {number} The value of this pot's parameter.\r\n     */\r\n    getValue() {\r\n        return this.value;\r\n    }\r\n\r\n    /**\r\n     * @return {number} The normalized value of this pot's parameter (as calculated in value / range).\r\n     */\r\n    getNormalizedValue() {\r\n        let rv = this.value / this.multiplier;\r\n        rv = (rv - this.minValue) / (this.maxValue - this.minValue);\r\n        return rv;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @enum {string}\r\n */\r\nPotModel.EventType = { VALUE_CHANGED: 'valueChanged'};\r\n\r\nexport default PotModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Linear pot component model.\r\n */\r\n\r\nimport PotModel from \"../pot/PotModel\";\r\n\r\n/**\r\n * Linear model provides a potentiometer behavior similar to real world linear potentiometers.\r\n *\r\n * @extends {PotModel}\r\n */\r\nexport default class LinearModel extends PotModel {}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base pot component.\r\n */\r\n\r\nimport PotModel from \"./PotModel\";\r\nimport Component from \"../../ui/Component\";\r\n\r\n/**\r\n * Pot component models a virtual potentiometer. This base class is used to adjust audio parameter values of pedals.\r\n *\r\n * @extends {Component}\r\n */\r\nclass Pot extends Component {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioParam|Function} param Audio parameter this pot will adjust. Can be gain, etc. If more complex\r\n     *     calculation is desired, one can pass a callback function which will be triggered each time the value of this pot\r\n     *     changes.\r\n     * @param {string} name Name of the pot. Will be written under it.\r\n     * @param {number} multiplier The multiplier of the effect. Some effects (such as gain) need this to be on the order of\r\n     *                       thousands.\r\n     * @param {string=} opt_size Size of the pot. Might be one of the values in pb.pot.Pot.Size enum. Default is REGULAR.\r\n     *     This size is added to the pot's class names for easier styling.\r\n     * @param {number=} opt_max Optional minimum value for the pot. Default value is 0.\r\n     * @param {number=} opt_min Optional maximum value for the pot. Default value is 1.\r\n     * @param {number=} opt_default Optional default value for the pot. Default value is 0.5.\r\n     */\r\n    constructor(param, name, multiplier, opt_size, opt_min, opt_max, opt_default) {\r\n        super();\r\n        this.setModel(new this.modelClass(param, name, multiplier || 1, opt_min, opt_max, opt_default));\r\n\r\n        this.modelClass = PotModel;\r\n\r\n        this.angle = 260;\r\n\r\n        /**\r\n         * @enum {string} DOM mappings.\r\n         */\r\n        this.mappings = {\r\n            KNOB: '.knob',\r\n            KNOB_HOLDER: '.knobHolder'\r\n        };\r\n        this.size = opt_size || Pot.Size.REGULAR;\r\n        this.bindModelEvents();\r\n    }\r\n\r\n    /**\r\n     * Sets the new value for this pot's audio parameter.\r\n     *\r\n     * @param {number} newValue New value to be set.\r\n     */\r\n    setValue(newValue) {\r\n        this.model.setValue(newValue);\r\n    }\r\n\r\n    /**\r\n     * Updates the user interface - rotation - accordingly.\r\n     */\r\n    updateUi() {\r\n        if(this.rendered) {\r\n            let newStyle = `rotateZ(${this.model.getNormalizedValue() * this.angle}deg)`;\r\n            this.$(this.mappings.KNOB)[0].style['-webkit-transform'] = newStyle;\r\n            this.$(this.mappings.KNOB)[0].style['transform'] = newStyle;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    template() {\r\n        return `<div class=\"pot ${this.size}\">\r\n                    <div class=\"knobHolder\">\r\n                        <div class=\"knob\"></div>\r\n                    </div>\r\n                    <div class=\"nameHolder\">\r\n                        <div class=\"name\">${this.model.name}</div>\r\n                    </div>\r\n                </div>`;\r\n    }\r\n\r\n    /**\r\n     * Render method updates its knob.\r\n     * @override\r\n     */\r\n    onAfterRender() {\r\n        super.onAfterRender();\r\n        this.updateUi();\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    bindModelEvents() {\r\n        this.model.addEventListener(PotModel.EventType.VALUE_CHANGED, this.updateUi, false);\r\n        // goog.events.listen(this.model, PotModel.EventType.VALUE_CHANGED, this.updateUi, false, this);\r\n    }\r\n}\r\n\r\n/**\r\n * @enum {string} Pot size.\r\n */\r\nPot.Size = { SMALL: 'small', REGULAR: 'regular' };\r\n\r\nexport default Pot;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base pot component.\r\n */\r\n\r\nimport LinearModel from \"./LinearModel\";\r\nimport Pot from \"../pot/Pot\";\r\n\r\n\r\n/**\r\n * Linear pot component models a linear potentiometer.\r\n *\r\n * @extends {Pot}\r\n */\r\nexport default class Linear extends Pot {\r\n    /**\r\n     * \r\n     * @param {AudioParam|Function} param Audio parameter this pot will adjust. Can be gain, etc. If more complex\r\n     *     calculation is desired, one can pass a callback function which will be triggered each time the value of this pot\r\n     *     changes.\r\n     * @param {string} name Name of the pot. Will be written under it.\r\n     * @param {number} multiplier The multiplier of the effect. Some effects (such as gain) need this to be on the order of\r\n     *                       thousands.\r\n     * @param {string=} opt_size Size of the pot. Might be one of the values in pb.pot.Pot.Size enum. Default is REGULAR.\r\n     *     This size is added to the pot's class names for easier styling.\r\n     * @param {number=} opt_max Optional minimum value for the pot. Default value is 0.\r\n     * @param {number=} opt_min Optional maximum value for the pot. Default value is 1.\r\n     * @param {number=} opt_default Optional default value for the pot. Default value is 0.5.\r\n     */\r\n    constructor(param, name, multiplier, opt_size, opt_min, opt_max, opt_default) {\r\n        super(param, name, multiplier, opt_size, opt_min, opt_max, opt_default);\r\n        this.modelClass = LinearModel;\r\n    }\r\n}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Linear pot component model.\r\n */\r\n\r\nimport PotModel from \"../pot/PotModel\";\r\n\r\n\r\n/**\r\n * Log model provides a potentiometer behavior similar to real world logarithmic potentiometers.\r\n *\r\n * @extends {PotModel}\r\n */\r\nexport default class LogModel extends PotModel {\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    processValue(newValue, oldValue) {\r\n        newValue = Math.pow(newValue, 3.3);\r\n        super.processValue(newValue, oldValue);\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    getNormalizedValue() {\r\n        let rv = super.getNormalizedValue();\r\n        rv = Math.pow(rv, 1/3.3);\r\n        return rv;\r\n    }\r\n}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base pot component.\r\n */\r\n\r\nimport Pot from \"../pot/Pot\";\r\nimport LogModel from \"./LogModel\";\r\n\r\n/**\r\n * Log pot component models a logarithmic potentiometer.\r\n *\r\n * @extends {Pot}\r\n */\r\nexport default class Log extends Pot {\r\n    /**\r\n     * \r\n     * @param {AudioParam|Function} param Audio parameter this pot will adjust. Can be gain, etc. If more complex\r\n     *     calculation is desired, one can pass a callback function which will be triggered each time the value of this pot\r\n     *     changes.\r\n     * @param {string} name Name of the pot. Will be written under it.\r\n     * @param {number} multiplier The multiplier of the effect. Some effects (such as gain) need this to be on the order of\r\n     *                       thousands.\r\n     * @param {string=} opt_size Size of the pot. Might be one of the values in pb.pot.Pot.Size enum. Default is REGULAR.\r\n     *     This size is added to the pot's class names for easier styling.\r\n     * @param {number=} opt_max Optional minimum value for the pot. Default value is 0.\r\n     * @param {number=} opt_min Optional maximum value for the pot. Default value is 1.\r\n     * @param {number=} opt_default Optional default value for the pot. Default value is 0.5.\r\n     */\r\n    constructor(param, name, multiplier, opt_size, opt_min, opt_max, opt_default) {\r\n        super(param, name, multiplier, opt_size, opt_min, opt_max, opt_default);\r\n        this.modelClass = LogModel;\r\n    }\r\n}","export { default as Linear } from './Linear/Linear'\r\nexport { default as LinearModel } from './Linear/LinearModel'\r\nexport { default as Log } from './Log/Log'\r\nexport { default as LogModel } from './Log/LogModel'\r\nexport { default as Pot } from './pot/Pot'\r\nexport { default as PotModel } from './pot/PotModel'","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base pedal component model.\r\n */\r\n\r\nimport ConnectableModel from \"../../Connectable/ConnectableModel\"\r\nimport math from \"../../../lib/math\";\r\n\r\n/**\r\n * Component model for base pedal\r\n * \r\n * @extends {ConnectableModel}\r\n */\r\nclass BoxModel extends ConnectableModel {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n\r\n        this.level = this.context.createGain();\r\n        this.effects.push(this.level);\r\n\r\n        this.nodes = [];\r\n    }\r\n\r\n    /**\r\n     * Sets the level of the effect.\r\n     * \r\n     * @param {number} newLevel The new level of the effect.\r\n     */\r\n    setLevel(newLevel) {\r\n        newLevel = Math.min(newLevel, 10);\r\n        newLevel = newLevel / 10;\r\n        this.level.gain.value = newLevel;\r\n    }\r\n\r\n    /**\r\n     * Routes the internal effects chain.\r\n     * @override\r\n     * @protected\r\n     */\r\n    routeInternal() {\r\n        let chain = this.chain;\r\n\r\n        for(let i = 0, len = chain.length - 1; i < len; i++) {\r\n            chain[i].connect(chain[i + 1]);\r\n        }\r\n\r\n        this.nodes = [\r\n            [this.effects[0], this.inputBuffer, this.outputBuffer],\r\n            [this.outputBuffer, math.peek(this.effects), null]\r\n        ]\r\n    }\r\n}\r\n\r\nexport default BoxModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview LED component.\r\n */\r\n\r\nimport SwitchModel from \"./footswitch/Switch/SwitchModel\";\r\nimport Component from \"./ui/Component\";\r\nimport Switch from \"./footswitch/Switch/Switch\";\r\n\r\n/**\r\n * LED is a simple component used to show the status of switches.\r\n *\r\n * @extends {Component}\r\n *\r\n */\r\nclass Led extends Component {\r\n    /**\r\n     * \r\n     * @param {Switch=} opt_footswitch Footswitch this LED will follow.\r\n     * @param {string=} opt_name Name of the LED. Will be written under it.\r\n     */\r\n    constructor(opt_footswitch, opt_name) {\r\n        super();\r\n        this.footswitch = opt_footswitch;\r\n        this.name = opt_name || '';\r\n        this.state = false;\r\n\r\n        this.bindModelEvents();\r\n    }\r\n\r\n    /**\r\n     * Toggles the state of the LED explicitly. Normally, this is unnecessary given a footswitch.\r\n     */\r\n    toggle() {\r\n        this.state = !this.state;\r\n        this.updateUi();\r\n    }\r\n\r\n    /**\r\n     * Updates the user interface - glow - accordingly.\r\n     */\r\n    updateUi() {\r\n        if(this.rendered) {\r\n            this.el.classList.toggle('on', this.state);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    template() {\r\n        return `<div class=\"led\">\r\n                    <div class=\"nameHolder\">\r\n                        <div class=\"name\">${this.name}</div>\r\n                    </div>\r\n                </div>`;\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    onAfterRender() {\r\n        super.onAfterRender();\r\n        this.updateUi();\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    bindModelEvents() {\r\n        if(this.footswitch) {\r\n            this.footswitch.model.addEventListener([SwitchModel.EventType.ON, SwitchModel.EventType.OFF], this.onSwitchValueChange, false);\r\n            // goog.events.listen(\r\n            //     this.footswitch.model,\r\n            //     [SwitchModel.EventType.ON, SwitchModel.EventType.OFF],\r\n            //     this.onSwitchValueChange,\r\n            //     false,\r\n            //     this\r\n            // );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Acts on an off or on event dispatched from this LED's footswitch. Updates the UI accordingly.\r\n     * \r\n     * @param {{newValue: boolean}} e ON / OFF event of the switch.\r\n     */\r\n    onSwitchValueChange(e) {\r\n        this.state = e.newValue;\r\n        this.updateUi();\r\n    }\r\n}\r\n\r\nexport default Led;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Base pedal.\r\n */\r\n\r\nimport Connectable from \"../../Connectable/Connectable\";\r\nimport SwitchModel from \"../../footswitch/Switch/SwitchModel\";\r\nimport BoxModel from \"./BoxModel\";\r\nimport Toggle from \"../../footswitch/toggle/Toggle\";\r\nimport Led from \"../../Led\";\r\nimport Linear from \"../../pot/Linear/Linear\";\r\n\r\nclass Box extends Connectable {\r\n    constructor(context) {\r\n        super(context);\r\n\r\n        this.modelClass = BoxModel;\r\n\r\n        this.volumePot = null;\r\n        this.bypassSwitch = null;\r\n        this.led = null;\r\n\r\n        this.leds = [];\r\n        this.switches = [];\r\n        this.pots = [];\r\n\r\n        /**\r\n         * DOM selector mappings.\r\n         *\r\n         * @enum {string}\r\n         */\r\n        this.mappings = {\r\n            POTS: '.pots',\r\n            SWITCHES: '.switches',\r\n            LEDS: '.leds'\r\n        };\r\n\r\n        /**\r\n         * Name of the pedal. It's written on top plate.\r\n         *\r\n         * @type {string}\r\n         */\r\n        this.name = 'pb';\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    createChildComponents() {\r\n        this.createPots();\r\n        this.createSwitches();\r\n    }\r\n\r\n    /**\r\n     * Creates the potentiometers of this stomp box.\r\n     */\r\n    createPots() {\r\n        this.volumePot = new Linear(this.model.level.gain, 'volume', 1);\r\n        this.volumePot.setValue(1);\r\n\r\n        this.pots.push(this.volumePot);\r\n    }\r\n\r\n    /**\r\n     * Creates the switches of this stomp box.\r\n     */\r\n    createSwitches() {\r\n        this.bypassSwitch = new Toggle();\r\n        this.led = new Led(this.bypassSwitch);\r\n        this.leds.push(this.led);\r\n        this.switches.push(this.bypassSwitch);\r\n\r\n        let that = this;\r\n        this.bypassSwitch.model.addEventListener(SwitchModel.EventType.ON, function() {\r\n            this.model.routeInternal();\r\n            setTimeout(() => {\r\n                that.model.routeInternal();\r\n            }, 10);\r\n        }, false);\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    connect(destination) {\r\n        super.connect(destination);\r\n        this.bypassSwitch.setNodes(this.model.nodes);\r\n    }\r\n\r\n    /**\r\n     * Sets the level of the effect.\r\n     * \r\n     * @param {number} newLevel The new level of the effect.\r\n     */\r\n    setLevel(newLevel) {\r\n        this.volumePot.setValue(newLevel);\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    template() {\r\n        let className = this.name.replace(/\\s/g, '-').toLowerCase();\r\n\r\n        return `\r\n            <div class=\"box ${className}\">\r\n                <div class=\"pots\"></div>\r\n                <div class=\"name\">${this.name}</div>\r\n                <div class=\"leds\"></div>\r\n                <div class=\"switches\"></div>\r\n                ${/*<div class=\"obg\"></div>\r\n                <div class=\"bg\"></div>\r\n                <div class=\"bgs\">\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                    <div class=\"bg\"></div>\r\n                </div> */''}\r\n            </div>`;\r\n    }\r\n\r\n    /**\r\n     * This method is called after the stomp box is appended to DOM. It then renders all its potentiometers.\r\n     * @override\r\n     */\r\n    onAfterRender() {\r\n        super.onAfterRender();\r\n\r\n        this.pots.forEach((pot) => {\r\n            pot.render(this.$(this.mappings.POTS)[0]);\r\n        }, this);\r\n\r\n        this.switches.forEach((sw) => {\r\n            sw.render(this.$(this.mappings.SWITCHES)[0]);\r\n        }, this);\r\n\r\n        this.leds.forEach((led) => {\r\n            led.render(this.$(this.mappings.LEDS)[0]);\r\n        }, this);\r\n    }\r\n}\r\n\r\nexport default Box;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Conv pedal component model.\r\n *\r\n * Impulse response buffer taken from\r\n *\r\n * http://www.adventurekid.se/akrt/free-conv-impulse-responses/\r\n */\r\n\r\nimport BoxModel from \"../box/BoxModel\"\r\n\r\n/**\r\n * Component model for conv pedal.\r\n * \r\n * @extends {BoxModel}\r\n */\r\nclass ConvModel extends BoxModel {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        this.conv = this.context.createConvolver();\r\n        this.convGain = this.context.createGain();\r\n        this.effects = [this.conv, this.convGain];\r\n\r\n        /**\r\n         * The path of the impulse response of this conv.\r\n         * \r\n         * @type {string}\r\n         */\r\n        this.iRPath;\r\n        \r\n        this.iRPath && this.loadIR();\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    routeInternal() {\r\n        super.routeInternal();\r\n        this.inputBuffer.connect(this.outputBuffer);\r\n    }\r\n\r\n    /**\r\n     * Loads the impulse response.\r\n     */\r\n    loadIR() {\r\n        let that = this,\r\n            request = new XMLHttpRequest();\r\n\r\n        request.open('GET', this.iRPath, true);\r\n        request.responseType = 'arraybuffer';\r\n\r\n        request.onload = function() {\r\n            that.context.decodeAudioData(/** @type {!ArrayBuffer} */(request.response), (buffer) => {\r\n                that.conv.buffer = buffer;\r\n            });\r\n        }\r\n        request.send();\r\n    }\r\n}\r\n\r\nexport default ConvModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Cabinet pedal component model.\r\n *\r\n * Impulse response buffer taken from\r\n *\r\n * http://www.adventurekid.se/akrt/free-reverb-impulse-responses/\r\n */\r\n\r\nimport ConvModel from \"../conv/ConvModel\";\r\n\r\n/**\r\n * Component model for Cabinet pedal.\r\n *\r\n * @extends {ConvModel}\r\n */\r\nclass CabinetModel extends ConvModel {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        \r\n        /**\r\n         * @override\r\n         */\r\n        this.iRPath = 'audio/ir/speaker/AK-SPKRS_VinUs_002.wav';\r\n    }\r\n}\r\n\r\nexport default CabinetModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Conv pedal.\r\n */\r\n\r\nimport Box from \"../box/Box\";\r\nimport ConvModel from \"./ConvModel\";\r\nimport Pot from \"../../pot/pot/Pot\";\r\n\r\n/**\r\n * Conv pedal.\r\n * \r\n * @extends {Box}\r\n */\r\nclass Conv extends Box {\r\n\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.modelClass = ConvModel;\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.name = 'convo';\r\n\r\n        /**\r\n         * @type {number} The gain multiplier for the level pot. Some IR responses are too high on volume and they need\r\n         * to be tamed.\r\n         */\r\n        this.gainMultiplier = 1;\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    createPots() {\r\n        this.volumePot = new Pot(this.model.convGain.gain, 'effect', this.gainMultiplier);\r\n        this.pots = [].concat(this.volumePot);\r\n    }\r\n}\r\n\r\nexport default Conv;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Cabinet pedal. This pedal simulates amp cabinets.\r\n */\r\n\r\nimport CabinetModel from \"./CabinetModel\";\r\nimport Conv from \"../conv/Conv\";\r\n\r\n/**\r\n * Cabinet Pedal.\r\n * \r\n * @extends {Conv}\r\n */\r\nclass Cabinet extends Conv {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will work on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n\r\n        this.volumePot.setValue(1);\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.modelClass = CabinetModel;\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.name = 'cabinet';\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.gainMultiplier = 10;\r\n    }\r\n}\r\n\r\nexport default Cabinet;","// Copyright 2020 Aytekin Hazar lhan. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Delay pedal component model.\r\n */\r\n\r\nimport BoxModel from \"../box/BoxModel\";\r\n\r\n/**\r\n * Component model for delay pedal.\r\n * @extends {BoxModel}\r\n */\r\nclass DelayModel extends BoxModel {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n\r\n        this.delayer = this.context.createDelay();\r\n        this.delayer.delayTime.value = 0.4;\r\n\r\n        this.feedbackGain = this.context.createGain();\r\n        this.feedbackGain.gain.value = 0.9;\r\n\r\n        this.effects = [this.delayer, this.feedbackGain, this.level];\r\n    }\r\n\r\n    /**\r\n     * Sets the delay timer level.\r\n     *\r\n     * @param {number} newTimer New delay timer value to be set.\r\n     */\r\n    setDelayTimer(newTimer) {\r\n        this.delayer.delayTime.value = newTimer;\r\n    }\r\n\r\n    /**\r\n     * Sets the feedback gain level.\r\n     *\r\n     * @param {number} newGain New gain value to be set.\r\n     */\r\n    setFeedbackGain(newGain) {\r\n        this.feedbackGain.gain.value = newGain;\r\n    };\r\n\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    routeInternal() {\r\n        super.routeInternal();\r\n\r\n        this.feedbackGain.connect(this.delayer);\r\n        this.inputBuffer.connect(this.outputBuffer);\r\n    };\r\n}\r\n\r\nexport default DelayModel;","// Copyright 2020 Aytekin Hazar lhan. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Delay pedal.\r\n */\r\n\r\nimport Box from \"../box/Box\";\r\nimport DelayModel from \"./DelayModel\";\r\nimport Log from \"../../pot/Log/Log\";\r\nimport Linear from \"../../pot/Linear/Linear\";\r\n\r\n/**\r\n * Delay pedal.\r\n *\r\n * @extends {Box}\r\n */\r\nclass Delay extends Box {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will work on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        /**\r\n         * @override\r\n         */\r\n        this.modelClass = DelayModel;\r\n\r\n        this.delayTimerPot = null;\r\n        this.feedbackGainPot = null;\r\n        \r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.name = 'delay';\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    createPots() {\r\n        super.createPots();\r\n        let delayTimeHandler = this.model.setDelayTimer.bind(this.model);\r\n        let feedbackGainHandler = this.model.setFeedbackGain.bind(this.model);\r\n\r\n        this.delayTimerPot = new Log(delayTimeHandler, 'delay time', 5);\r\n        this.feedbackGainPot = new Linear(feedbackGainHandler, 'feedback gain', 0.95);\r\n        this.pots.push(this.delayTimerPot, this.feedbackGainPot);\r\n    };\r\n\r\n\r\n    /**\r\n     * Sets the delay timer pot.\r\n     *\r\n     * @param {number} newTimer New delay timer value in range 0-5 seconds.\r\n     */\r\n    setDelayTimer(newTimer) {\r\n        this.delayTimerPot.setValue(newTimer);\r\n    };\r\n\r\n\r\n    /**\r\n     * Sets the feedback gain pot.\r\n     *\r\n     * @param {number} newGain New gain value in range 0-0.95.\r\n     */\r\n    setFeedbackGain(newGain) {\r\n        this.feedbackGainPot.setValue(newGain);\r\n    };\r\n}\r\n\r\nexport default Delay;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Overdrive pedal component model.\r\n */\r\n\r\nimport BoxModel from \"../box/BoxModel\";\r\n\r\n/**\r\n * Component model for overdrive pedal.\r\n *\r\n * @extends {BoxModel}\r\n */\r\nclass OverdriveModel extends BoxModel {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n\r\n        this.lowPassFreq = 3000;\r\n        this.lowPass = this.context.createBiquadFilter();\r\n        this.lowPass.type = 'lowpass';\r\n        this.lowPass.frequency.value = this.lowPassFreq;\r\n    \r\n        this.waveShaper = this.context.createWaveShaper();\r\n\r\n        this.wsCurve = null;\r\n\r\n        this.effects = [\r\n            this.waveShaper,\r\n            this.lowPass,\r\n            this.level\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Creates two wave shaper curves that introduce distortion to the incoming signal.\r\n     *\r\n     * @param {number} amount Amount of distortion to be applied.\r\n     */\r\n    createWSCurve(amount) {\r\n        let k = amount;\r\n        let n_samples = 22050;\r\n        this.wsCurve = new Float32Array(n_samples);\r\n        let deg = Math.PI / 180;\r\n        for (let i = 0; i < n_samples; i += 1) {\r\n            let x = i * 2 / n_samples - 1;\r\n            this.wsCurve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\r\n        }\r\n        this.waveShaper.curve = this.wsCurve;\r\n    };\r\n\r\n    /**\r\n     * Sets the drive level.\r\n     *\r\n     * @param {number} newDrive Drive level to set.\r\n     */\r\n    setDrive(newDrive) {\r\n        this.createWSCurve(10 * newDrive);\r\n    };\r\n\r\n    /**\r\n     * Sets the tone level.\r\n     * @param {number} newTone Tone level to set.\r\n     */\r\n    setTone(newTone) {\r\n        this.lowPass.frequency.value = 2000 + newTone;\r\n    };\r\n}\r\n\r\nexport default OverdriveModel;","// Copyright 2012 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Overdrive pedal.\r\n */\r\n\r\nimport Box from \"../box/Box\";\r\nimport OverdriveModel from \"./OverdriveModel\";\r\nimport Pot from \"../../pot/pot/Pot\";\r\nimport Log from \"../../pot/Log/Log\";\r\n\r\n/**\r\n * Overdrive pedal.\r\n *\r\n * @extends {Box}\r\n */\r\nclass Overdrive extends Box {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will work on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        /**\r\n         * @override\r\n         */\r\n        this.modelClass = OverdriveModel;\r\n\r\n        this.drivePot = null;\r\n        this.tonePot = null;\r\n        \r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.name = 'overdrive';\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    createPots() {\r\n        super.createPots();\r\n        let driveHandler = this.model.setDrive.bind(this.model);\r\n        let toneHandler = this.model.setTone.bind(this.model);\r\n\r\n        this.drivePot = new Log(driveHandler, 'drive', 2000);\r\n        this.tonePot = new Log(toneHandler, 'tone', 3000, Pot.Size.SMALL);\r\n        this.pots.push(this.drivePot, this.tonePot);\r\n    };\r\n\r\n\r\n    /**\r\n     * Sets the drive pot.\r\n     *\r\n     * @param {number} newValue New drive value, ranges between 0-10.\r\n     */\r\n    setDrive(newValue) {\r\n        this.drivePot.setValue(newValue);\r\n    };\r\n\r\n\r\n    /**\r\n     * Sets the tone pot.\r\n     *\r\n     * @param {number} newValue New tone value.\r\n     */\r\n    setTone(newValue) {\r\n        this.tonePot.setValue(newValue);\r\n    };\r\n}\r\n\r\nexport default Overdrive;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Reverb pedal component model.\r\n *\r\n * Inspiration and impulse response buffer taken from\r\n *\r\n * http://kevincennis.com/audio/\r\n * http://kevincennis.com/audio/assets/sounds/pcm90cleanplate.wav\r\n *\r\n * More can be found at\r\n * http://www.dubbhism.com/2008/10/free-download-60-classic-and-king-tubby.html\r\n * http://www.adventurekid.se/akrt/free-reverb-impulse-responses/\r\n */\r\n\r\nimport ConvModel from \"../conv/ConvModel\";\r\n\r\n/**\r\n * Component model for reverb pedal.\r\n *\r\n * @extends {ConvModel}\r\n */\r\nclass ReverbModel extends ConvModel {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context The context this component model will operate on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        /**\r\n         * @override\r\n         */\r\n        this.iRPath = 'audio/ir/reverb/pcm90cleanplate.wav';\r\n    }\r\n}\r\n\r\nexport default ReverbModel;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Reverb pedal.\r\n */\r\n\r\nimport ReverbModel from \"./ReverbModel\";\r\nimport Conv from \"../conv/Conv\";\r\n\r\n/**\r\n * Reverb pedal.\r\n *\r\n * @extends {Conv}\r\n */\r\nclass Reverb extends Conv {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will work on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        /**\r\n         * @override\r\n         */\r\n        this.modelClass = ReverbModel;\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.name = 'reverb';\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.gainMultiplier = 1;\r\n    }\r\n}\r\n\r\nexport default Reverb;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Volume pedal component model.\r\n */\r\n\r\nimport BoxModel from \"../box/BoxModel\";\r\n\r\n/**\r\n * Component model for volume pedal.\r\n *\r\n * @extends {BoxModel}\r\n */\r\nexport default class VolumeModel extends BoxModel {}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Volume pedal.\r\n */\r\n\r\nimport Box from \"../box/Box\";\r\nimport VolumeModel from \"./VolumeModel\";\r\n\r\n/**\r\n * Volume pedal.\r\n *\r\n * @extends {Box}\r\n */\r\nclass Volume extends Box {\r\n    /**\r\n     * \r\n     * @param {AudioContext} context Audio context the pedal will work on.\r\n     */\r\n    constructor(context) {\r\n        super(context);\r\n        this.volumePot.setValue(1);\r\n        /**\r\n         * @override\r\n         */\r\n        this.modelClass = VolumeModel;\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        this.name = 'volume';\r\n    }\r\n}\r\n\r\nexport default Volume;","export { default as Box } from './box/Box'\r\nexport { default as BoxModel } from './box/BoxModel'\r\nexport { default as Cabinet } from './cabinet/Cabinet'\r\nexport { default as CabinetModel } from './cabinet/CabinetModel'\r\nexport { default as Conv } from './conv/Conv'\r\nexport { default as ConvModel } from './conv/ConvModel'\r\nexport { default as Delay } from './delay/Delay'\r\nexport { default as DelayModel } from './delay/DelayModel'\r\nexport { default as Overdrive } from './overdrive/Overdrive'\r\nexport { default as OverdriveModel } from './overdrive/OverdriveModel'\r\nexport { default as Reverb } from './reverb/Reverb'\r\nexport { default as ReverbModel } from './reverb/ReverbModel'\r\nexport { default as Volume } from './volume/Volume'\r\nexport { default as VolumeModel } from './volume/VolumeModel'","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Library module for color functions.\r\n */\r\n\r\nimport math from \"./math\";\r\n\r\nconst names = {\r\n    'aliceblue': '#f0f8ff',\r\n    'antiquewhite': '#faebd7',\r\n    'aqua': '#00ffff',\r\n    'aquamarine': '#7fffd4',\r\n    'azure': '#f0ffff',\r\n    'beige': '#f5f5dc',\r\n    'bisque': '#ffe4c4',\r\n    'black': '#000000',\r\n    'blanchedalmond': '#ffebcd',\r\n    'blue': '#0000ff',\r\n    'blueviolet': '#8a2be2',\r\n    'brown': '#a52a2a',\r\n    'burlywood': '#deb887',\r\n    'cadetblue': '#5f9ea0',\r\n    'chartreuse': '#7fff00',\r\n    'chocolate': '#d2691e',\r\n    'coral': '#ff7f50',\r\n    'cornflowerblue': '#6495ed',\r\n    'cornsilk': '#fff8dc',\r\n    'crimson': '#dc143c',\r\n    'cyan': '#00ffff',\r\n    'darkblue': '#00008b',\r\n    'darkcyan': '#008b8b',\r\n    'darkgoldenrod': '#b8860b',\r\n    'darkgray': '#a9a9a9',\r\n    'darkgreen': '#006400',\r\n    'darkgrey': '#a9a9a9',\r\n    'darkkhaki': '#bdb76b',\r\n    'darkmagenta': '#8b008b',\r\n    'darkolivegreen': '#556b2f',\r\n    'darkorange': '#ff8c00',\r\n    'darkorchid': '#9932cc',\r\n    'darkred': '#8b0000',\r\n    'darksalmon': '#e9967a',\r\n    'darkseagreen': '#8fbc8f',\r\n    'darkslateblue': '#483d8b',\r\n    'darkslategray': '#2f4f4f',\r\n    'darkslategrey': '#2f4f4f',\r\n    'darkturquoise': '#00ced1',\r\n    'darkviolet': '#9400d3',\r\n    'deeppink': '#ff1493',\r\n    'deepskyblue': '#00bfff',\r\n    'dimgray': '#696969',\r\n    'dimgrey': '#696969',\r\n    'dodgerblue': '#1e90ff',\r\n    'firebrick': '#b22222',\r\n    'floralwhite': '#fffaf0',\r\n    'forestgreen': '#228b22',\r\n    'fuchsia': '#ff00ff',\r\n    'gainsboro': '#dcdcdc',\r\n    'ghostwhite': '#f8f8ff',\r\n    'gold': '#ffd700',\r\n    'goldenrod': '#daa520',\r\n    'gray': '#808080',\r\n    'green': '#008000',\r\n    'greenyellow': '#adff2f',\r\n    'grey': '#808080',\r\n    'honeydew': '#f0fff0',\r\n    'hotpink': '#ff69b4',\r\n    'indianred': '#cd5c5c',\r\n    'indigo': '#4b0082',\r\n    'ivory': '#fffff0',\r\n    'khaki': '#f0e68c',\r\n    'lavender': '#e6e6fa',\r\n    'lavenderblush': '#fff0f5',\r\n    'lawngreen': '#7cfc00',\r\n    'lemonchiffon': '#fffacd',\r\n    'lightblue': '#add8e6',\r\n    'lightcoral': '#f08080',\r\n    'lightcyan': '#e0ffff',\r\n    'lightgoldenrodyellow': '#fafad2',\r\n    'lightgray': '#d3d3d3',\r\n    'lightgreen': '#90ee90',\r\n    'lightgrey': '#d3d3d3',\r\n    'lightpink': '#ffb6c1',\r\n    'lightsalmon': '#ffa07a',\r\n    'lightseagreen': '#20b2aa',\r\n    'lightskyblue': '#87cefa',\r\n    'lightslategray': '#778899',\r\n    'lightslategrey': '#778899',\r\n    'lightsteelblue': '#b0c4de',\r\n    'lightyellow': '#ffffe0',\r\n    'lime': '#00ff00',\r\n    'limegreen': '#32cd32',\r\n    'linen': '#faf0e6',\r\n    'magenta': '#ff00ff',\r\n    'maroon': '#800000',\r\n    'mediumaquamarine': '#66cdaa',\r\n    'mediumblue': '#0000cd',\r\n    'mediumorchid': '#ba55d3',\r\n    'mediumpurple': '#9370db',\r\n    'mediumseagreen': '#3cb371',\r\n    'mediumslateblue': '#7b68ee',\r\n    'mediumspringgreen': '#00fa9a',\r\n    'mediumturquoise': '#48d1cc',\r\n    'mediumvioletred': '#c71585',\r\n    'midnightblue': '#191970',\r\n    'mintcream': '#f5fffa',\r\n    'mistyrose': '#ffe4e1',\r\n    'moccasin': '#ffe4b5',\r\n    'navajowhite': '#ffdead',\r\n    'navy': '#000080',\r\n    'oldlace': '#fdf5e6',\r\n    'olive': '#808000',\r\n    'olivedrab': '#6b8e23',\r\n    'orange': '#ffa500',\r\n    'orangered': '#ff4500',\r\n    'orchid': '#da70d6',\r\n    'palegoldenrod': '#eee8aa',\r\n    'palegreen': '#98fb98',\r\n    'paleturquoise': '#afeeee',\r\n    'palevioletred': '#db7093',\r\n    'papayawhip': '#ffefd5',\r\n    'peachpuff': '#ffdab9',\r\n    'peru': '#cd853f',\r\n    'pink': '#ffc0cb',\r\n    'plum': '#dda0dd',\r\n    'powderblue': '#b0e0e6',\r\n    'purple': '#800080',\r\n    'red': '#ff0000',\r\n    'rosybrown': '#bc8f8f',\r\n    'royalblue': '#4169e1',\r\n    'saddlebrown': '#8b4513',\r\n    'salmon': '#fa8072',\r\n    'sandybrown': '#f4a460',\r\n    'seagreen': '#2e8b57',\r\n    'seashell': '#fff5ee',\r\n    'sienna': '#a0522d',\r\n    'silver': '#c0c0c0',\r\n    'skyblue': '#87ceeb',\r\n    'slateblue': '#6a5acd',\r\n    'slategray': '#708090',\r\n    'slategrey': '#708090',\r\n    'snow': '#fffafa',\r\n    'springgreen': '#00ff7f',\r\n    'steelblue': '#4682b4',\r\n    'tan': '#d2b48c',\r\n    'teal': '#008080',\r\n    'thistle': '#d8bfd8',\r\n    'tomato': '#ff6347',\r\n    'turquoise': '#40e0d0',\r\n    'violet': '#ee82ee',\r\n    'wheat': '#f5deb3',\r\n    'white': '#ffffff',\r\n    'whitesmoke': '#f5f5f5',\r\n    'yellow': '#ffff00',\r\n    'yellowgreen': '#9acd32'\r\n};\r\n\r\nconst hexTripletRe = /#(.)(.)(.)/;\r\nconst validHexColorRe = /^#(?:[0-9a-f]{3}){1,2}$/i;\r\n\r\nconst rgbColorRe = /^(?:rgb)?\\((0|[1-9]\\d{0,2}),\\s?(0|[1-9]\\d{0,2}),\\s?(0|[1-9]\\d{0,2})\\)$/i;\r\n\r\nconst isValidRgbColor = (str) => {\r\n    // Each component is separate (rather than using a repeater) so we can\r\n    // capture the match. Also, we explicitly set each component to be either 0,\r\n    // or start with a non-zero, to prevent octal numbers from slipping through.\r\n    var regExpResultArray = str.match(rgbColorRe);\r\n    if (regExpResultArray) {\r\n      const r = Number(regExpResultArray[1]);\r\n      const g = Number(regExpResultArray[2]);\r\n      const b = Number(regExpResultArray[3]);\r\n      if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {\r\n        return [r, g, b];\r\n      }\r\n    }\r\n    return [];\r\n  };\r\n\r\n/**\r\n * Checks if a string is a valid hex color.  We expect strings of the format\r\n * #RRGGBB (ex: #1b3d5f) or #RGB (ex: #3CA == #33CCAA).\r\n * @param {string} str String to check.\r\n * @return {boolean} Whether the string is a valid hex color.\r\n * @private\r\n */\r\nconst isValidHexColor = (str) => {\r\n    return validHexColorRe.test(str);\r\n};\r\n\r\n/**\r\n * Normalize an hex representation of a color\r\n * @param {string} hexColor an hex color string.\r\n * @return {string} hex color in the format '#rrggbb' with all lowercase\r\n *     literals.\r\n */\r\nconst normalizeHex = (hexColor) => {\r\n    if (!isValidHexColor(hexColor))\r\n      throw Error(`${hexColor}' is not a valid hex color`);\r\n\r\n    if (hexColor.length == 4)  // of the form #RGB\r\n      hexColor = hexColor.replace(hexTripletRe, '#$1$1$2$2$3$3');\r\n\r\n    return hexColor.toLowerCase();\r\n};\r\n\r\n/**\r\n * Takes a string a prepends a '#' sign if one doesn't exist.\r\n * Small helper method for use by goog.color and friends.\r\n * @param {string} str String to check.\r\n * @return {string} The value passed in, prepended with a '#' if it didn't\r\n *     already have one.\r\n */\r\nconst prependHashIfNecessaryHelper = (str) => {\r\n    return str.charAt(0) == '#' ? str : '#' + str;\r\n};\r\n\r\n/**\r\n * Parses a color out of a string.\r\n * @param {string} str Color in some format.\r\n * @return {{hex: string, type: string}} 'hex' is a string containing a hex\r\n *     representation of the color, 'type' is a string containing the type\r\n *     of color format passed in ('hex', 'rgb', 'named').\r\n */\r\nconst parse = (str) => {\r\n    var result = {};\r\n    str = String(str);\r\n  \r\n    var maybeHex = prependHashIfNecessaryHelper(str);\r\n\r\n    if (isValidHexColor(maybeHex)) {\r\n      result.hex = normalizeHex(maybeHex);\r\n      result.type = 'hex';\r\n      return result;\r\n    } else {\r\n      var rgb = isValidRgbColor(str);\r\n\r\n      if (rgb.length) {\r\n        result.hex = rgbArrayToHex(rgb);\r\n        result.type = 'rgb';\r\n        return result;\r\n      } else if (names) {\r\n        var hex = names[str.toLowerCase()];\r\n        if (hex) {\r\n          result.hex = hex;\r\n          result.type = 'named';\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n    throw Error(`${str} is not a valid color string`);\r\n  };\r\n\r\n/**\r\n * Converts a color from RGB to hex representation.\r\n * @param {number} r Amount of red, int between 0 and 255.\r\n * @param {number} g Amount of green, int between 0 and 255.\r\n * @param {number} b Amount of blue, int between 0 and 255.\r\n * @return {string} hex representation of the color.\r\n */\r\nconst rgbToHex = (r, g, b) => {\r\n    r = Number(r);\r\n    g = Number(g);\r\n    b = Number(b);\r\n    if (r != (r & 255) || g != (g & 255) || b != (b & 255)) {\r\n      throw Error(`(${r}, ${g}, ${b}) is not a valid RGB color`);\r\n    }\r\n    var rgb = (r << 16) | (g << 8) | b;\r\n    if (r < 0x10) {\r\n      return `#${(0x1000000 | rgb).toString(16).substr(1)}`;\r\n    }\r\n    return `#${rgb.toString(16)}`;\r\n  };\r\n\r\n/**\r\n * Converts a color from RGB to hex representation.\r\n * @param {Array} rgb rgb representation of the color.\r\n * @return {string} hex representation of the color.\r\n */\r\nconst rgbArrayToHex = (rgb) => {\r\n    return rgbToHex(rgb[0], rgb[1], rgb[2]);\r\n};\r\n\r\n/**\r\n * Converts a hex representation of a color to RGB.\r\n * @param {string} hex Color to convert.\r\n * @return {Array} rgb representation of the color.\r\n */\r\nconst hexToRgb = (hex) => {\r\n    // hex = normalizeHex(hex);\r\n    let rgb = parseInt(hex.substr(1), 16);\r\n    let r = rgb >> 16;\r\n    let g = (rgb >> 8) & 255;\r\n    let b = rgb & 255;\r\n\r\n    return [r, g, b];\r\n}\r\n\r\n/**\r\n * Converts a hex representation of a color to HSL.\r\n * @param {string} hex Color to convert.\r\n * @return {Array} hsl representation of the color.\r\n */\r\nconst hexToHsl = (hex) => {\r\n    let rgb = hexToRgb(hex);\r\n    return rgbToHsl(rgb[0], rgb[1], rgb[2]);\r\n}\r\n\r\n/**\r\n * Converts a color from RGB color space to HSL color space.\r\n * Modified from {@link http://en.wikipedia.org/wiki/HLS_color_space}.\r\n * @param {number} r Value of red, in [0, 255].\r\n * @param {number} g Value of green, in [0, 255].\r\n * @param {number} b Value of blue, in [0, 255].\r\n * @return {!Array} hsl representation of the color.\r\n */\r\nconst rgbToHsl = (r, g, b) => {\r\n    // First must normalize r, g, b to be between 0 and 1.\r\n    const normR = r / 255;\r\n    const normG = g / 255;\r\n    const normB = b / 255;\r\n    const max = Math.max(normR, normG, normB);\r\n    const min = Math.min(normR, normG, normB); \r\n    var h = 0;\r\n    var s = 0;\r\n\r\n    // Luminosity is the average of the max and min rgb color intensities.\r\n    var l = 0.5 * (max + min);\r\n\r\n    // The hue and saturation are dependent on which color intensity is the max.\r\n    // If max and min are equal, the color is gray and h and s should be 0.\r\n    if(max != min) {\r\n        if(max == normR) {\r\n            h = 60 * (normG - normB) / (max - min);\r\n        } else if(max == normG) {\r\n            h = 60 * (normB - normR) / (max - min) + 120;\r\n        } else if(max == normB) {\r\n            h = 60 * (normR - normG) / (max - min) + 240;\r\n        }\r\n\r\n        if(0 < l && l <= 0.5) {\r\n            s = (max - min) / (2 * l);\r\n        } else {\r\n            s = (max - min) / (2 - 2 * l);\r\n        }\r\n    }\r\n\r\n    // Make sure the hue falls between 0 and 360.\r\n    return [Math.round(h + 360) % 360, s, l];\r\n}\r\n\r\n/**\r\n * Blend two colors together, using the specified factor to indicate the weight\r\n * given to the first color\r\n * @param {Array} rgb1 First color represented in rgb.\r\n * @param {Array} rgb2 Second color represented in rgb.\r\n * @param {number} factor The weight to be given to rgb1 over rgb2. Values\r\n *     should be in the range [0, 1]. If less than 0, factor will be set to 0.\r\n *     If greater than 1, factor will be set to 1.\r\n * @return {!Array} Combined color represented in rgb.\r\n */\r\nconst blend = (rgb1, rgb2, factor) => {\r\n    factor = math.clamp(factor, 0, 1);\r\n  \r\n    return [\r\n      Math.round(rgb2[0] + factor * (rgb1[0] - rgb2[0])),\r\n      Math.round(rgb2[1] + factor * (rgb1[1] - rgb2[1])),\r\n      Math.round(rgb2[2] + factor * (rgb1[2] - rgb2[2]))\r\n    ];\r\n  };\r\n\r\n/**\r\n * Adds black to the specified color, darkening it\r\n * @param {Array} rgb rgb representation of the color.\r\n * @param {number} factor Number in the range [0, 1]. 0 will do nothing, while\r\n *     1 will return black. If less than 0, factor will be set to 0. If greater\r\n *     than 1, factor will be set to 1.\r\n * @return {!Array} Combined rgb color.\r\n */\r\nconst darken = (rgb, factor) => {\r\n    var black = [0, 0, 0];\r\n    return blend(black, rgb, factor);\r\n};\r\n\r\nexport default {\r\n    names: names,\r\n    hexTripletRe: hexTripletRe,\r\n    validHexColorRe: validHexColorRe,\r\n    rgbColorRe: rgbColorRe,\r\n    isValidRgbColor: isValidRgbColor,\r\n    isValidHexColor: isValidHexColor,\r\n    normalizeHex: normalizeHex,\r\n    prependHashIfNecessaryHelper: prependHashIfNecessaryHelper,\r\n    parse: parse,\r\n    rgbToHex: rgbToHex,\r\n    rgbArrayToHex: rgbArrayToHex,\r\n    hexToRgb: hexToRgb,\r\n    hexToHsl: hexToHsl,\r\n    rgbToHsl: rgbToHsl,\r\n    blend: blend,\r\n    darken: darken,\r\n}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Library module for dom functions.\r\n */\r\n\r\nimport math from \"./math\";\r\n\r\nvar defaultDomHelper;\r\n\r\nconst NodeType = {\r\n    ELEMENT: 1,\r\n    ATTRIBUTE: 2,\r\n    TEXT: 3,\r\n    CDATA_SECTION: 4,\r\n    ENTITY_REFERENCE: 5,\r\n    ENTITY: 6,\r\n    PROCESSING_INSTRUCTION: 7,\r\n    COMMENT: 8,\r\n    DOCUMENT: 9,\r\n    DOCUMENT_TYPE: 10,\r\n    DOCUMENT_FRAGMENT: 11,\r\n    NOTATION: 12\r\n  };\r\n\r\nconst getOwnerDocument = (node) => {\r\n    if(node) {\r\n        return /** @type {!Document} */ (\r\n            node.nodeType == NodeType.DOCUMENT ? node : node.ownerDocument ||\r\n                    node.document);\r\n    }\r\n};\r\n\r\nconst getDocument = () => {\r\n    return document;\r\n};\r\n\r\nclass DomHelper {\r\n    constructor(opt_document=null) {\r\n        /**\r\n         * Reference to the document object to use\r\n         * @const\r\n         * @type {!Document}\r\n         */\r\n        this.document_ = opt_document || document;\r\n    }\r\n};\r\n\r\nconst removeNode = (node) => {\r\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\r\n}\r\n\r\nconst getDomHelper = (opt_element) => {\r\n    return opt_element ?\r\n        new DomHelper(getOwnerDocument(opt_element)) :\r\n        (defaultDomHelper ||\r\n         (defaultDomHelper = new DomHelper()));\r\n};\r\n\r\nconst insertSiblingBefore = (newNode, refNode) => {\r\n    if (refNode.parentNode) {\r\n      refNode.parentNode.insertBefore(newNode, refNode);\r\n    }\r\n};\r\n\r\nconst getDocumentScrollElement = (doc) => {\r\n    // Old WebKit needs body.scrollLeft in both quirks mode and strict mode. We\r\n    // also default to the documentElement if the document does not have a body\r\n    // (e.g. a SVG document).\r\n    // Uses http://dev.w3.org/csswg/cssom-view/#dom-document-scrollingelement to\r\n    // avoid trying to guess about browser behavior from the UA string.\r\n    if (doc.scrollingElement) {\r\n      return doc.scrollingElement;\r\n    }\r\n    // if (!goog.userAgent.WEBKIT && goog.dom.isCss1CompatMode_(doc)) {\r\n    //   return doc.documentElement;\r\n    // }\r\n    return doc.body || doc.documentElement;\r\n};\r\n\r\nconst getWindow = (doc) => {\r\n  return /** @type {!Window} */ (doc.parentWindow || doc.defaultView);\r\n};\r\n\r\nconst getDocumentScroll = (doc) => {\r\n    var el = getDocumentScrollElement(doc);\r\n    var win = getWindow(doc);\r\n    // if (goog.userAgent.IE && goog.userAgent.isVersionOrHigher('10') &&\r\n    //     win.pageYOffset != el.scrollTop) {\r\n    //   // The keyboard on IE10 touch devices shifts the page using the pageYOffset\r\n    //   // without modifying scrollTop. For this case, we want the body scroll\r\n    //   // offsets.\r\n    //   return new math.Coordinate(el.scrollLeft, el.scrollTop);\r\n    // }\r\n    return new math.Coordinate(\r\n        win.pageXOffset || el.scrollLeft, win.pageYOffset || el.scrollTop);\r\n};\r\n\r\nexport default {\r\n    defaultDomHelper: defaultDomHelper,\r\n    NodeType: NodeType,\r\n    getOwnerDocument: getOwnerDocument,\r\n    getDocument: getDocument,\r\n    DomHelper: DomHelper,\r\n    removeNode: removeNode,\r\n    getDomHelper: getDomHelper,\r\n    insertSiblingBefore: insertSiblingBefore,\r\n    getDocumentScrollElement: getDocumentScrollElement,\r\n    getWindow: getWindow,\r\n    getDocumentScroll: getDocumentScroll\r\n}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Library module for events.\r\n */\r\n\r\nimport math from \"./math\";\r\nimport dom from \"./dom\";\r\n\r\nconst getBoundingClientRect = (el) => {\r\n  try {\r\n    return el.getBoundingClientRect();\r\n  } catch (e) {\r\n    // In IE, calling getBoundingClientRect on an orphan element raises an\r\n    // \"Unspecified Error\". All other browsers return zeros.\r\n    return {'left': 0, 'top': 0, 'right': 0, 'bottom': 0};\r\n  }\r\n};\r\n\r\nconst getClientViewportElement = (opt_node) => {\r\n    var doc;\r\n    if (opt_node) {\r\n      doc = dom.getOwnerDocument(opt_node);\r\n    } else {\r\n      doc = dom.getDocument();\r\n    }\r\n  \r\n    // In old IE versions the document.body represented the viewport\r\n    // if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9) &&\r\n    //     !dom.getDomHelper(doc).isCss1CompatMode()) {\r\n    //   return doc.body;\r\n    // }\r\n    return doc.documentElement;\r\n  };\r\n\r\n\r\nconst getPageOffset = (el) => {\r\n  var doc = dom.getOwnerDocument(el);\r\n\r\n  // NOTE(arv): If element is hidden (display none or disconnected or any the\r\n  // ancestors are hidden) we get (0,0) by default but we still do the\r\n  // accumulation of scroll position.\r\n\r\n  // TODO(arv): Should we check if the node is disconnected and in that case\r\n  //            return (0,0)?\r\n\r\n  var pos = new math.Coordinate(0, 0);\r\n\r\n  var viewportElement = getClientViewportElement(doc);\r\n\r\n  if (el == viewportElement) {\r\n    // viewport is always at 0,0 as that defined the coordinate system for this\r\n    // function - this avoids special case checks in the code below\r\n    return pos;\r\n  }\r\n\r\n  var box = getBoundingClientRect(el);\r\n\r\n  // Must add the scroll coordinates in to get the absolute page offset\r\n  // of element since getBoundingClientRect returns relative coordinates to\r\n  // the viewport.\r\n\r\n  var scrollCoord = dom.getDomHelper(doc).getDocumentScroll();\r\n  pos.x = box.left + scrollCoord.x;\r\n  pos.y = box.top + scrollCoord.y;\r\n\r\n  return pos;\r\n}\r\n\r\nexport default {\r\n  getBoundingClientRect: getBoundingClientRect,\r\n  getClientViewportElement: getClientViewportElement,\r\n  getPageOffset: getPageOffset\r\n}","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview ShadowMaker for pb.\r\n */\r\n\r\n\r\nimport color from \"../lib/color\";\r\nimport style from \"../lib/style\";\r\nimport dom from \"../lib/dom\";\r\n\r\n\r\n/**\r\n * Casts shadows on a box element.\r\n *\r\n * @param {HTMLElement} element Element to cast my shadows upon.\r\n * @param {number} length Length of the shadow.\r\n * @param {number} darkness How dark the shadow will be.\r\n * @param {number} weight How vast the shadow will be.\r\n * @param {Array.<string>=} opt_before Any shadows to cast before mine.\r\n * @param {Array.<string>=} opt_after Any shadows to cast after mine.\r\n */\r\nexport function shadowMaker(element, length, darkness, weight, opt_before, opt_after) {\r\n    opt_before = opt_before || [];\r\n    opt_after = opt_after || [];\r\n\r\n    let elStyle = document.defaultView.getComputedStyle(element, null);\r\n    let colorText = elStyle.getPropertyValue('background-color');\r\n    let hslArray = color.hexToHsl(color.parse(colorText).hex);\r\n\r\n    darkness = darkness || 1;\r\n\r\n    hslArray[2] = hslArray[2] * darkness;\r\n\r\n    /**\r\n     * Returns a shadow declaration.\r\n     * \r\n     * @param {number} x X distance.\r\n     * @param {number} y Y distance.\r\n     * @param {number} blur Blur amount.\r\n     * @param {number} a Alpha.\r\n     * @param {number} opt_d Density.\r\n     * @return {string} The shadow CSS declaration.\r\n     */\r\n    let shadowTemplate = function(x, y, blur, a, opt_d=undefined) {\r\n        opt_d = opt_d || 0;\r\n        let d = `${opt_d}px`;\r\n        return `${x}px ${y}px ${blur}px ${d} hsl(${hslArray[0]}, ${hslArray[1]*100}%, ${a}%)`;\r\n    };\r\n\r\n    // let all = '';\r\n    let shadows = [];\r\n    let xAngle = (window.innerWidth / 2 - style.getPageOffset(element).x - element.offsetWidth / 2) / 30;\r\n    let yAngle = (window.innerHeight - style.getPageOffset(element).y - element.offsetHeight / 2) / 80;\r\n    let yConDist = yAngle * length / 10;\r\n\r\n    let con = length;\r\n\r\n    while(length--) {\r\n        let xDist = xAngle * length / con;\r\n        let yDist = yConDist * length * 2 / con; //yAngle * Math.sqrt(length) * length / con;\r\n    \r\n        shadows.push(\r\n            shadowTemplate(\r\n                xDist,\r\n                yDist,\r\n                0,\r\n                hslArray[2] * 100 - hslArray[2] * 100 * (length + 5) / con / 1.6\r\n            )\r\n        );\r\n    }\r\n\r\n    shadows.splice(0, 0,\r\n        shadowTemplate(xAngle, yConDist * 2, con * 4, 0, 0),\r\n        //shadowTemplate(xAngle / weight, yConDist * 2, con / 2, 0,  con / 4 / weight),\r\n        shadowTemplate(xAngle / weight / 8, yConDist * 3, con * 4, 30, con / 12),\r\n        shadowTemplate(xAngle / weight / 8, yConDist * 2, con, 0, con / 4 / weight),\r\n        shadowTemplate(xAngle / weight / 8, yConDist * 2.55, con * 2, 5, con / 3 / weight)\r\n    );\r\n\r\n    shadows = [].concat(opt_before, shadows.reverse(), opt_after);\r\n    element.style['boxShadow'] = shadows.join(', ');\r\n    element.style['left'] = `-${xAngle/2}px`;\r\n}\r\n\r\n/**\r\n * Casts shadows on a text element.\r\n *\r\n * @param {HTMLElement} element Element to cast my shadows upon.\r\n * @param {number} length Length of the shadow.\r\n * @param {Array.<string>} before Any shadows to cast before mine.\r\n * @param {Array.<string>} after Any shadows to cast after mine.\r\n * @param {boolean} invertY Whether I should invert the Y axis and casts shadows up instead of down.\r\n * @param {number} invertX How I may invert the X axis.\r\n */\r\nexport function textShadowMaker(element, length, before, after, invertY, invertX) {\r\n    before = before || [];\r\n    after = after || [];\r\n    let elStyle = document.defaultView.getComputedStyle(element, null);\r\n    let colorText = elStyle.getPropertyValue('color');\r\n    let hslArray = color.hexToHsl(color.parse(colorText).hex);\r\n\r\n    /**\r\n     * Returns a shadow declaration.\r\n     *\r\n     * @param {number} x X distance.\r\n     * @param {number} y Y distance.\r\n     * @param {number} blur Blur amount.\r\n     * @param {number} a Alpha.\r\n     * @return {string} The shadow CSS declaration.\r\n     */\r\n    let shadowTemplate = function(x, y, blur, a) {\r\n        return `${x}px ${y}px ${blur}px hsl(${hslArray[0]}, ${hslArray[1]*100}%, ${a}%)`;\r\n    };\r\n    // let all = '';\r\n    let shadows = [];\r\n    let xAngle = (window.innerWidth / 2 - style.getPageOffset(element).x - element.offsetWidth / 2) / 30;\r\n    let yAngle = (window.innerHeight - style.getPageOffset(element).y - element.offsetHeight / 2) / 30;\r\n\r\n    let yConDist = yAngle * length / 10;\r\n\r\n    let con = length;\r\n\r\n    while (length--) {\r\n        let xDist = xAngle * length / con;\r\n        let yDist = yConDist * length * 2 / con; //yAngle * Math.sqrt(length) * length / con;\r\n        if (invertY) yDist = -yDist;\r\n        if (invertX) xDist = -xDist * Math.pow(invertX, 4);\r\n        shadows.push(\r\n            shadowTemplate(\r\n                xDist,\r\n                yDist,\r\n                0,\r\n                hslArray[2] * 100 - hslArray[2] * 100 * (length + 5) / con / 1.6\r\n            )\r\n        );\r\n    }\r\n    shadows.splice(0, 0,\r\n        shadowTemplate(xAngle, 0, con * 2, 0),\r\n        shadowTemplate(xAngle, yConDist * 1.8, con / 2, 0),\r\n        shadowTemplate(xAngle, yConDist * 2.5, con * 2, 0));\r\n\r\n    shadows = [].concat(before, shadows.reverse(), after);\r\n\r\n    element.style.textShadow = shadows.join(', ');\r\n};\r\n\r\nexport function textShadowMakerDom(element, length) {\r\n    element.style.position = 'absolute';\r\n\r\n    let elStyle = document.defaultView.getComputedStyle(element, null);\r\n    let colorText = elStyle.getPropertyValue('color');\r\n    let rgbArray = color.hexToRgb(color.parse(colorText).hex);\r\n\r\n    for (let i = 0; i < length; i++) {\r\n        let el = element.cloneNode(true);\r\n        el.style.position = 'absolute';\r\n        el.style.webkitTransform = `translateZ(-${i}px)`;\r\n\r\n        el.style.color = color.rgbArrayToHex(color.darken(rgbArray, (i / length * 0.8) + 0.2));\r\n        dom.insertSiblingBefore(el, element);\r\n\r\n        if (i == length - 1) {\r\n            el.style.textShadow = '0 0 10px black,0 0 20px black,0 0 30px black,0 0 40px black,0 0 50px black';\r\n        }\r\n    }\r\n};","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n\r\nimport Connectable from \"./Connectable/Connectable\";\r\nimport { shadowMaker } from \"./ShadowMaker\";\r\nimport dom from \"../lib/dom\";\r\nimport Box from \"./stomp/box/Box\";\r\n\r\nclass Board extends Connectable {\r\n  constructor(context) {\r\n    super(context);\r\n    this.context = context;\r\n\r\n    this.output = null;\r\n\r\n    this.mediaStreamDestination = null;\r\n\r\n    /**\r\n     * Pedals of this board.\r\n     *\r\n     * @protected\r\n     * @type {Array.<Box>}\r\n     */\r\n    this.pedals = null;\r\n\r\n    /**\r\n     * @enum {string} DOM mappings.\r\n     */\r\n    this.mappings = {\r\n      EMPTY: '.empty'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds pedals to this board. An alias method for addChildren.\r\n   * @param {Array.<Box>} pedals Pedals.\r\n   */\r\n  addPedals(pedals) {\r\n    // Component.prototype.addChildren.call(this, pedals);\r\n    this.addChildren(pedals);\r\n  };\r\n\r\n  /**\r\n   * Calculates and draws shadows for pedals and their pots.\r\n   */\r\n  doShadows() {\r\n    this.getPedals().forEach((pedal) => {\r\n      shadowMaker(pedal.el, 40, 0.5, 0.7);\r\n      pedal.pots.forEach((pot) => {\r\n        shadowMaker(pot.$(pot.mappings.KNOB_HOLDER)[0], 10, 0.5, 4);\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @override\r\n   *\r\n   * @param {Box} child Child pedal to add to this board.\r\n   * @param {number} index Where the child pedal should be put at.\r\n   * @param {boolean=} opt_render Whether the pedal should be rendered after the call to this function.\r\n   */\r\n  addChildAt(child, index, opt_render) {\r\n    super.addChildAt(child, index, opt_render);\r\n\r\n    if (this.getPedals().length)\r\n        dom.removeNode(this.$(this.mappings.EMPTY)[0]);\r\n\r\n    this.routeInternal();\r\n    if (this.rendered) this.doShadows();\r\n  };\r\n\r\n  /**\r\n   * Convenience method for adding pedals at a given index.\r\n   *\r\n   * @param {Box} child Child pedal to add to this board.\r\n   * @param {number} index Where the child pedal should be put at.\r\n   * @param {boolean=} opt_render Whether the pedal should be rendered after the call to this function.\r\n   */\r\n  addPedalAt(child, index, opt_render) {\r\n    this.addChildAt(child, index, opt_render)\r\n  };\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  remove_child(child, opt_unrender) {\r\n    let el = super.remove_child(child, opt_unrender);\r\n\r\n    if (this.getPedals().length == 0)\r\n        this.el.innerHTML = this.templates_empty();\r\n\r\n    this.routeInternal();\r\n    return el;\r\n  };\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  onAfterRender() {\r\n    super.onAfterRender();\r\n    this.doShadows();\r\n  };\r\n\r\n  /**\r\n   * Returns the pedals in this board.\r\n   *\r\n   * @return {Array.<Box>} Pedals in this board.\r\n   */\r\n  getPedals () {\r\n    return this.getChildren();\r\n  };\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  template() {\r\n    return `<div class=\"board\">\r\n              ${this.templates_empty()}\r\n            </div>`;\r\n  };\r\n\r\n  templates_empty() {\r\n    return '<div class=\"empty\"><div class=\"text\">board is empty</div></div>';\r\n  };\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  connect(destination) {\r\n    super.connect(destination);\r\n    this.output = destination;\r\n    this.routeInternal();\r\n  };\r\n\r\n  /**\r\n   * Routes the pedals.\r\n   *\r\n   * @protected\r\n   */\r\n  routeInternal() {\r\n    let fx = this.getPedals();\r\n\r\n    this.getInput().disconnect();\r\n\r\n    if (fx.length) {\r\n        this.getInput().connect(fx[0].getInput());\r\n        this.output && fx[fx.length - 1].connect(this.output);\r\n\r\n        fx.forEach((pedal, i) => {\r\n            pedal.disconnect();\r\n            fx[i + 1] && pedal.connect(fx[i + 1]);\r\n        });\r\n        this.output && this.mediaStreamDestination && fx[fx.length - 1].model.getOutput().connect(this.mediaStreamDestination);\r\n    }\r\n    else {\r\n        this.getInput().connect(this.getOutput());\r\n        this.mediaStreamDestination && this.getInput().connect(this.mediaStreamDestination);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Sets the media stream destination for this board. The output will be sent to the media stream destination, too.\r\n   *\r\n   * @param {MediaStreamAudioDestinationNode} destination Media stream destination for RTC peer connections.\r\n   */\r\n  setMediaStreamDestination(destination) {\r\n    this.mediaStreamDestination = destination;\r\n  };\r\n\r\n}\r\n\r\nexport default Board;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview A stage is unique per session, has an Input, an Output and a Board.\r\n * Its board can be swapped with other boards.\r\n */\r\n\r\nimport Component from \"./ui/Component\";\r\nimport FileInput from \"./io/FileInput\";\r\nimport Input from \"./io/Input\";\r\nimport Output from \"./io/Output\";\r\nimport Board from \"./Board\";\r\n\r\n/**\r\n * Stage hosts pedal boards, input and output.\r\n * \r\n * @extends {Component}\r\n */\r\nclass Stage extends Component {\r\n    constructor() {\r\n        super();\r\n        this.input = null;\r\n        this.output = null;\r\n        this.board = null;\r\n        this.mediaStreamDestination = null;\r\n        /**\r\n         * The audio context for this stage.\r\n         * \r\n         * @protected\r\n         * @type {AudioContext}\r\n         */\r\n        this.context = new AudioContext();\r\n        this.initIO();\r\n    }\r\n\r\n    /**\r\n     * Gives the audio context created for this stage. Every effect, input and output in this stage should be declared on\r\n     * this context.\r\n     * \r\n     * @return {AudioContext} The audio context of this stage.\r\n     */\r\n    getContext() {\r\n        return this.context;\r\n    }\r\n\r\n    /**\r\n     * Initializes the input and the output.\r\n     */\r\n    initIO() {\r\n        /*\r\n            Example for FileInput:\r\n                this.input = new FileInput(this.context, 'audio/samples/sample1.mp3');\r\n\r\n                goog.events.listen(this.input, 'loaded', () => {\r\n                    this.route();\r\n                }, false, this);\r\n        */\r\n\r\n        this.input = new Input(this.context);\r\n        this.output = new Output(this.context);\r\n    }\r\n\r\n    /**\r\n     * Initializes the pedal components.\r\n     * @param {Board} board Board component.\r\n     */\r\n    setBoard(board) {\r\n        this.board && this.board.dispose();\r\n\r\n        this.board = board;\r\n        this.mediaStreamDestination && this.board.setMediaStreamDestination(this.mediaStreamDestination);\r\n\r\n        this.route();\r\n\r\n        this.addChild(this.board);\r\n    }\r\n\r\n    /**\r\n     * Routes the signal.\r\n     * Input -> volume pedal -> reverb pedal\r\n     */\r\n    route() {\r\n        this.input.disconnect();\r\n        this.input.connect(this.board);\r\n        this.board.connect(this.output);\r\n    }\r\n\r\n    /**\r\n     * Sets the media stream destination for this stage. It will be forwarded to this stage's board.\r\n     * \r\n     * @param {MediaStreamAudioDestinationNode} destination Media stream destination for RTC peer connections.\r\n     */\r\n    setMediaStreamDestination(destination) {\r\n        this.mediaStreamDestination = destination;\r\n        this.board.setMediaStreamDestination(this.mediaStreamDestination);\r\n    }\r\n\r\n    /**\r\n     * Plays the input.\r\n     * \r\n     * @param {string} url The url of the external sample. Since it will be interpreted as a relative path, it should\r\n     * reside at the domain where the application runs.\r\n     */\r\n    play(url) {\r\n        this.input.disconnect();\r\n        this.input = new FileInput(this.context, url);\r\n        this.route();\r\n        this.input.on('loaded', function() {\r\n            this.input.play.bind(this.input, 0)}, false);\r\n    }\r\n\r\n    /**\r\n     * Stops the input.\r\n     */\r\n    stop() {\r\n        this.input.stop();\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    template() {\r\n        return `<div class=\"stage\"></div>`;\r\n    }\r\n}\r\n\r\nexport default Stage;","// Copyright 2020 Armagan Amcalar. All Rights Reserved.\r\n//\r\n// This file is part of Pedalboard.js.\r\n//\r\n// Pedalboard.js is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Pedalboard.js is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Pedalboard.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @fileoverview Bootstrapper for pb.\r\n */\r\n\r\n/**\r\n * Bootstrapper class includes things to do on startup.\r\n */\r\nclass Bootstrapper {}\r\n\r\nwindow['AudioContext'] = window['AudioContext'] || window['webkitAudioContext'];\r\nnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n\r\n// export default Bootstrapper;\r\nexport { default as Connectable } from './Connectable'\r\nexport { default as footswitch } from './footswitch'\r\nexport { default as io } from './io'\r\nexport { default as pot } from './pot'\r\nexport { default as stomp } from './stomp'\r\nexport { default as Component } from './ui/Component'\r\nexport { default as Board } from './Board'\r\nexport { default as IConnectable } from './IConnectable'\r\nexport { default as IConnectableModel } from './IConnectableModel'\r\nexport { default as Led } from './Led'\r\nexport { default as ShadowMaker } from './ShadowMaker'\r\nexport { default as Stage } from './Stage'\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}